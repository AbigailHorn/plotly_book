--- 
title: "Interactive web-based data visualization with R, plotly, and shiny"
author: "Carson Sievert"
date: "`r Sys.Date()`"
documentclass: krantz
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
colorlinks: yes
lot: yes
lof: yes
site: bookdown::bookdown_site
description: "A book example for a Chapman & Hall book."
github-repo: ropensci/plotly
twitter-handle: cpsievert
#cover-image: images/plotly.png
always_allow_html: yes
---

# Overview {-}

```{r setup, include=FALSE}
library(knitr)
# global chunk options
opts_chunk$set(
  message = FALSE, 
  warning = FALSE, 
  comment = "#>",
  collapse = TRUE,
  cache = TRUE,
  fig.show = "hold"
)

# conditionally global chunk options
if (knitr::is_latex_output()) {
  opts_chunk$set(out.width = "\\textwidth", fig.width = 8, fig.asp = 0.618)
}
if (knitr::is_html_output()) {
  # https://github.com/hafen/lazyrmd
  opts_chunk$set(out.width = "100%", lazy = TRUE)
  
  knit_hooks$set(summary = function(before, options, envir) {
    if (length(options$summary)) {
      if (before) {
        return(sprintf("<details><summary>%s</summary>\n", options$summary))
      } else {
        return("\n</details>")
      }
    }
  })
}

include_vimeo <- function(id, width = "100%", height = "400") {
  url <- sprintf("https://player.vimeo.com/video/%s?title=0&byline=0&portrait=0", id)
  # This would be nice -- send PR to support shiny.tag objects? 
  # knitr::include_url(url, height = height)
  htmltools::tags$iframe(
    src = url, 
    width = width, 
    height = height, 
    frameborder = "0", 
    seamless = "seamless",
    webkitAllowFullScreen = NA, 
    mozallowfullscreen = NA, 
    allowFullScreen = NA
  )
}

options(
  dplyr.print_min = 6, dplyr.print_max = 6, 
  digits = 3, htmltools.dir.version = FALSE
)
```

```{r, echo=FALSE, include=knitr::is_html_output(), out.width=220, out.height=245}
include_graphics('images/plotly.png')
```

>>>>>>> master
This website explains and partially documents the R package **plotly**, a high-level interface to the open source JavaScript graphing library [plotly.js](https://github.com/plotly/plotly.js) (which powers [plot.ly](https://plot.ly/)). The R package already has numerous examples and documentation on <https://plot.ly/r> and <https://plot.ly/ggplot2>, but this website provides more of a cohesive narrative to help explain fundamental concepts and recent developments. By reading from start to finish, readers new to R and plotly should be able to get up and running fairly quickly. That being said, advanced R and plotly users should still find the majority of this material useful and informative. I highly recommend copying/pasting examples into your R console, and modifying them as you read along, to aid the learning process.

This work is licensed under the [Creative Commons Attribution-NonCommercial-NoDerivs 3.0](http://creativecommons.org/licenses/by-nc-nd/3.0/us/) United States License. 

## Follow along on RStudio Cloud {-}

[This RStudio Cloud project](https://rstudio.cloud/project/156701) provides a computing environment that you can use to follow along with the book. There are many code examples that produce an interactive graphic, but the interactives themselves are not always included. Sometimes, instead of the interactive, a video is included to demonstrate the interactive capabilities. In those cases, you can copy/paste code in RStudio Cloud to get at the interactive plot.

```{r, echo=FALSE, fig.link="https://rstudio.cloud/project/156701"}
knitr::include_graphics("images/rstudioCloud.svg")
```


## plot.ly for collaboration {-}

[plot.ly](https://plot.ly/) subscribers can use the `api_create()` function to publish plots from R onto plotly's web platform. This platform makes it very easy to host/share your graphs, collaborate with others, and is free to use for public graphs.^[If you need privacy or customer support, [pricing options](https://plot.ly/products/cloud/)] Once a plot is hosted on your account, others may copy/fork your graph to their account (with the right permissions) using a friendly user-interface. Here is a quick demonstration of that workflow from inside RStudio:

```{block, type='rmdtip'}
As long as you can view a plot hosted on <http://plot.ly>, you can bring the data behind with plot into R via the `get_figure()` function. This makes it easy to access and modify plots created with _any_ plotly.js interface (e.g., Python, MATLAB, Julia, Scala, etc) from your R console.
```

```{r, echo = FALSE, include=knitr::is_html_output(), results='hide'}
include_vimeo("307598716")
```

<br />
<br />

Not only is this web-based user-interface to plotly.js useful for collaborating with others, but it is also useful for completing tasks that are cumbersome to do at the command-line. For instance, annotations can be added to any plot via a point-and-click interface:

<br />
<br />

```{r, echo = FALSE, include=knitr::is_html_output()}
include_vimeo("307597892")
```
