<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>plotly for R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="An overview of the R package plotly">
  <meta name="generator" content="bookdown 0.1.7 and GitBook 2.6.7">

  <meta property="og:title" content="plotly for R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://ropensci.github.io/plotly/" />
  <meta property="og:image" content="http://ropensci.github.io/plotly/images/plotly.png" />
  <meta property="og:description" content="An overview of the R package plotly" />
  <meta name="github-repo" content="ropensci/plotly" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="plotly for R" />
  <meta name="twitter:site" content="@cpsievert" />
  <meta name="twitter:description" content="An overview of the R package plotly" />
  <meta name="twitter:image" content="http://ropensci.github.io/plotly/images/plotly.png" />

<meta name="author" content="Carson Sievert">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="a-case-study-of-housing-sales-in-texas.html">
<link rel="next" href="choosing-an-interface-sec-choosing.html">

<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/plotlyjs/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs/plotly-latest.min.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/plotly.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">plotly for R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i>Get started</a></li>
<li class="chapter" data-level="" data-path="plot-ly-for-collaboration.html"><a href="plot-ly-for-collaboration.html"><i class="fa fa-check"></i>plot.ly for collaboration</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="two-approaches-one-object.html"><a href="two-approaches-one-object.html"><i class="fa fa-check"></i><b>1</b> Two approaches, one object</a><ul>
<li class="chapter" data-level="1.1" data-path="a-case-study-of-housing-sales-in-texas.html"><a href="a-case-study-of-housing-sales-in-texas.html"><i class="fa fa-check"></i><b>1.1</b> A case study of housing sales in Texas</a><ul>
<li class="chapter" data-level="1.1.1" data-path="a-case-study-of-housing-sales-in-texas.html"><a href="a-case-study-of-housing-sales-in-texas.html#plot_ly"><i class="fa fa-check"></i><b>1.1.1</b> The <code>plot_ly()</code> interface</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="extending-ggplotly.html"><a href="extending-ggplotly.html"><i class="fa fa-check"></i><b>1.2</b> Extending <code>ggplotly()</code></a></li>
<li class="chapter" data-level="1.3" data-path="choosing-an-interface-sec-choosing.html"><a href="choosing-an-interface-sec-choosing.html"><i class="fa fa-check"></i><b>1.3</b> Choosing an interface {sec: choosing}</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-plotly-cookbook.html"><a href="the-plotly-cookbook.html"><i class="fa fa-check"></i><b>2</b> The plotly cookbook</a><ul>
<li class="chapter" data-level="2.1" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i><b>2.1</b> Scatterplots</a></li>
<li class="chapter" data-level="2.2" data-path="smart-defaults-messages-warnings-errors.html"><a href="smart-defaults-messages-warnings-errors.html"><i class="fa fa-check"></i><b>2.2</b> Smart defaults, messages, warnings, errors</a></li>
<li class="chapter" data-level="2.3" data-path="functional-interface.html"><a href="functional-interface.html"><i class="fa fa-check"></i><b>2.3</b> Functional interface</a></li>
<li class="chapter" data-level="2.4" data-path="special-arguments.html"><a href="special-arguments.html"><i class="fa fa-check"></i><b>2.4</b> Special arguments</a><ul>
<li class="chapter" data-level="2.4.1" data-path="special-arguments.html"><a href="special-arguments.html#the-color-argument"><i class="fa fa-check"></i><b>2.4.1</b> The color argument</a></li>
<li class="chapter" data-level="2.4.2" data-path="special-arguments.html"><a href="special-arguments.html#the-symbol-argument"><i class="fa fa-check"></i><b>2.4.2</b> The symbol argument</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="subplot.html"><a href="subplot.html"><i class="fa fa-check"></i><b>3</b> The subplot() function</a><ul>
<li class="chapter" data-level="3.1" data-path="recursive-subplots.html"><a href="recursive-subplots.html"><i class="fa fa-check"></i><b>3.1</b> Recursive subplots</a></li>
<li class="chapter" data-level="3.2" data-path="ggplot2-subplots.html"><a href="ggplot2-subplots.html"><i class="fa fa-check"></i><b>3.2</b> ggplot2 subplots</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-interactive-techniques.html"><a href="advanced-interactive-techniques.html"><i class="fa fa-check"></i><b>4</b> Advanced interactive techniques</a><ul>
<li class="chapter" data-level="4.1" data-path="highlighting.html"><a href="highlighting.html"><i class="fa fa-check"></i><b>4.1</b> Highlighting</a></li>
<li class="chapter" data-level="4.2" data-path="linked-highlighting.html"><a href="linked-highlighting.html"><i class="fa fa-check"></i><b>4.2</b> Linked highlighting</a></li>
<li class="chapter" data-level="4.3" data-path="current-limitations.html"><a href="current-limitations.html"><i class="fa fa-check"></i><b>4.3</b> Current limitations</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="animation.html"><a href="animation.html"><i class="fa fa-check"></i><b>5</b> Animation</a></li>
<li class="chapter" data-level="6" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>6</b> shiny</a></li>
<li class="chapter" data-level="7" data-path="accessing-plotly-js-events-in-r-without-shiny.html"><a href="accessing-plotly-js-events-in-r-without-shiny.html"><i class="fa fa-check"></i><b>7</b> Accessing plotly.js events in R, without shiny</a></li>
<li class="chapter" data-level="8" data-path="plotly-interface-internals.html"><a href="plotly-interface-internals.html"><i class="fa fa-check"></i><b>8</b> plotly interface internals</a><ul>
<li class="chapter" data-level="8.1" data-path="ensuring-type-safety-in-data-transfer.html"><a href="ensuring-type-safety-in-data-transfer.html"><i class="fa fa-check"></i><b>8.1</b> Ensuring type safety in data transfer</a></li>
<li class="chapter" data-level="8.2" data-path="plotly-object-representation.html"><a href="plotly-object-representation.html"><i class="fa fa-check"></i><b>8.2</b> plotly object representation</a></li>
<li class="chapter" data-level="8.3" data-path="miscellanous.html"><a href="miscellanous.html"><i class="fa fa-check"></i><b>8.3</b> Miscellanous</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="extending-ggplotly-and-plotly.html"><a href="extending-ggplotly-and-plotly.html"><i class="fa fa-check"></i><b>9</b> Extending ggplotly and plotly</a><ul>
<li class="chapter" data-level="9.1" data-path="converting-custom-geoms.html"><a href="converting-custom-geoms.html"><i class="fa fa-check"></i><b>9.1</b> Converting custom geoms</a></li>
<li class="chapter" data-level="9.2" data-path="wrappers-for-domain-specific-viz.html"><a href="wrappers-for-domain-specific-viz.html"><i class="fa fa-check"></i><b>9.2</b> Wrappers for domain-specific viz</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>10</b> References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">plotly for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="extending-ggplotly" class="section level2">
<h2><span class="header-section-number">1.2</span> Extending <code>ggplotly()</code></h2>
<p>Since the <code>ggplotly()</code> function returns a plotly object, we can manipulate that object <code>plot_ly()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) +
<span class="st">  </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>()

p %&gt;%
<span class="st">  </span><span class="kw">ggplotly</span>(<span class="dt">layerData =</span> <span class="dv">2</span>, <span class="dt">originalData =</span> <span class="ot">FALSE</span>) %&gt;%
<span class="st">  </span><span class="kw">plotly_data</span>()</code></pre></div>
<pre><code>## # A tibble: 80 × 13
##           x        y     ymin     ymax        se PANEL group  colour
##       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;chr&gt;
## 1  1.513000 32.08897 28.14821 36.02974 1.9183213     1    -1 #3366FF
## 2  1.562506 31.68786 28.15439 35.22134 1.7200573     1    -1 #3366FF
## 3  1.612013 31.28163 28.10997 34.45329 1.5439313     1    -1 #3366FF
## 4  1.661519 30.87037 28.01249 33.72825 1.3911843     1    -1 #3366FF
## 5  1.711025 30.45419 27.85973 33.04864 1.2629527     1    -1 #3366FF
## 6  1.760532 30.03318 27.65029 32.41607 1.1599650     1    -1 #3366FF
## 7  1.810038 29.60745 27.38445 31.83046 1.0821338     1    -1 #3366FF
## 8  1.859544 29.17711 27.06496 31.28925 1.0281676     1    -1 #3366FF
## 9  1.909051 28.74224 26.69739 30.78709 0.9954106     1    -1 #3366FF
## 10 1.958557 28.30017 26.28752 30.31283 0.9797387     1    -1 #3366FF
## # ... with 70 more rows, and 5 more variables: fill &lt;chr&gt;, size &lt;dbl&gt;,
## #   linetype &lt;dbl&gt;, weight &lt;dbl&gt;, alpha &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p %&gt;%
<span class="st">  </span><span class="kw">ggplotly</span>(<span class="dt">layerData =</span> <span class="dv">2</span>, <span class="dt">originalData =</span> F) %&gt;%
<span class="st">  </span><span class="kw">add_fun</span>(function(p) {
    p %&gt;%<span class="st"> </span><span class="kw">slice</span>(<span class="kw">which.max</span>(se)) %&gt;%
<span class="st">      </span><span class="kw">add_segments</span>(<span class="dt">x =</span> ~x, <span class="dt">xend =</span> ~x, <span class="dt">y =</span> ~ymin, <span class="dt">yend =</span> ~ymax) %&gt;%
<span class="st">      </span><span class="kw">add_annotations</span>(<span class="st">&quot;Maximum uncertainty&quot;</span>, <span class="dt">ax =</span> <span class="dv">60</span>)
  }) %&gt;%
<span class="st">  </span><span class="kw">add_fun</span>(function(p) {
    p %&gt;%<span class="st"> </span><span class="kw">slice</span>(<span class="kw">which.min</span>(se)) %&gt;%
<span class="st">      </span><span class="kw">add_segments</span>(<span class="dt">x =</span> ~x, <span class="dt">xend =</span> ~x, <span class="dt">y =</span> ~ymin, <span class="dt">yend =</span> ~ymax) %&gt;%
<span class="st">      </span><span class="kw">add_annotations</span>(<span class="st">&quot;Minimum uncertainty&quot;</span>)
  })</code></pre></div>
<div id="htmlwidget-9516a8ec49f53e0bab0e" style="width:768px;height:474.624px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9516a8ec49f53e0bab0e">{"x":{"data":[{"x":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],"y":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],"text":["wt: 2.62<br>mpg: 21","wt: 2.88<br>mpg: 21","wt: 2.32<br>mpg: 22.8","wt: 3.21<br>mpg: 21.4","wt: 3.44<br>mpg: 18.7","wt: 3.46<br>mpg: 18.1","wt: 3.57<br>mpg: 14.3","wt: 3.19<br>mpg: 24.4","wt: 3.15<br>mpg: 22.8","wt: 3.44<br>mpg: 19.2","wt: 3.44<br>mpg: 17.8","wt: 4.07<br>mpg: 16.4","wt: 3.73<br>mpg: 17.3","wt: 3.78<br>mpg: 15.2","wt: 5.25<br>mpg: 10.4","wt: 5.42<br>mpg: 10.4","wt: 5.34<br>mpg: 14.7","wt: 2.2<br>mpg: 32.4","wt: 1.62<br>mpg: 30.4","wt: 1.84<br>mpg: 33.9","wt: 2.46<br>mpg: 21.5","wt: 3.52<br>mpg: 15.5","wt: 3.44<br>mpg: 15.2","wt: 3.84<br>mpg: 13.3","wt: 3.85<br>mpg: 19.2","wt: 1.94<br>mpg: 27.3","wt: 2.14<br>mpg: 26","wt: 1.51<br>mpg: 30.4","wt: 3.17<br>mpg: 15.8","wt: 2.77<br>mpg: 19.7","wt: 3.57<br>mpg: 15","wt: 2.78<br>mpg: 21.4"],"key":null,"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""},{"x":[1.513,1.56250632911392,1.61201265822785,1.66151898734177,1.7110253164557,1.76053164556962,1.81003797468354,1.85954430379747,1.90905063291139,1.95855696202532,2.00806329113924,2.05756962025316,2.10707594936709,2.15658227848101,2.20608860759494,2.25559493670886,2.30510126582278,2.35460759493671,2.40411392405063,2.45362025316456,2.50312658227848,2.55263291139241,2.60213924050633,2.65164556962025,2.70115189873418,2.7506582278481,2.80016455696203,2.84967088607595,2.89917721518987,2.9486835443038,2.99818987341772,3.04769620253165,3.09720253164557,3.14670886075949,3.19621518987342,3.24572151898734,3.29522784810127,3.34473417721519,3.39424050632911,3.44374683544304,3.49325316455696,3.54275949367089,3.59226582278481,3.64177215189873,3.69127848101266,3.74078481012658,3.79029113924051,3.83979746835443,3.88930379746835,3.93881012658228,3.9883164556962,4.03782278481013,4.08732911392405,4.13683544303798,4.1863417721519,4.23584810126582,4.28535443037975,4.33486075949367,4.3843670886076,4.43387341772152,4.48337974683544,4.53288607594937,4.58239240506329,4.63189873417722,4.68140506329114,4.73091139240506,4.78041772151899,4.82992405063291,4.87943037974684,4.92893670886076,4.97844303797468,5.02794936708861,5.07745569620253,5.12696202531646,5.17646835443038,5.2259746835443,5.27548101265823,5.32498734177215,5.37449367088608,5.424],"y":[32.08897233857,31.6878645869701,31.2816303797919,30.8703709543688,30.4541875480347,30.0331813981232,29.6074537419678,29.1771058169022,28.7422388602601,28.3001719301537,27.834621969428,27.3476575600419,26.84497968394,26.3322893230667,25.8152874593666,25.2996750747841,24.7911531512637,24.29542267075,23.8181846151875,23.3651399665205,22.955253039598,22.6138488714952,22.3275852300224,22.0817586181852,21.8616655389892,21.65260249544,21.4398659905432,21.2087525273044,20.953335722037,20.7158424594628,20.4957065225374,20.2829337645837,20.0675300389245,19.8395011988825,19.5888530977805,19.2971559094315,18.9444093670088,18.5670026794964,18.2056968860288,17.9009022641924,17.620602502374,17.3400153015964,17.079077805285,16.8175887231322,16.5575726926136,16.3083303048321,16.0791621508901,15.8793688218903,15.7018119854881,15.5259429561214,15.3517253848296,15.1793328075288,15.0089387601353,14.8407167785652,14.6748403987346,14.5114831565596,14.3508185879563,14.193020228841,14.0382616151298,13.8867162827388,13.7385577675841,13.5939596055819,13.4530953326483,13.3161384846995,13.1832625976516,13.0546412074207,12.930447849923,12.8108560610747,12.6960393767918,12.5861713329905,12.4814254655869,12.3819753104973,12.2879944036376,12.1996562809241,12.117134478273,12.0406025316002,11.9702339768221,11.9062023498547,11.8486811866141,11.7978440230166],"text":["wt: 1.51<br>mpg: 32.09","wt: 1.56<br>mpg: 31.69","wt: 1.61<br>mpg: 31.28","wt: 1.66<br>mpg: 30.87","wt: 1.71<br>mpg: 30.45","wt: 1.76<br>mpg: 30.03","wt: 1.81<br>mpg: 29.61","wt: 1.86<br>mpg: 29.18","wt: 1.91<br>mpg: 28.74","wt: 1.96<br>mpg: 28.3","wt: 2.01<br>mpg: 27.83","wt: 2.06<br>mpg: 27.35","wt: 2.11<br>mpg: 26.84","wt: 2.16<br>mpg: 26.33","wt: 2.21<br>mpg: 25.82","wt: 2.26<br>mpg: 25.3","wt: 2.31<br>mpg: 24.79","wt: 2.35<br>mpg: 24.3","wt: 2.4<br>mpg: 23.82","wt: 2.45<br>mpg: 23.37","wt: 2.5<br>mpg: 22.96","wt: 2.55<br>mpg: 22.61","wt: 2.6<br>mpg: 22.33","wt: 2.65<br>mpg: 22.08","wt: 2.7<br>mpg: 21.86","wt: 2.75<br>mpg: 21.65","wt: 2.8<br>mpg: 21.44","wt: 2.85<br>mpg: 21.21","wt: 2.9<br>mpg: 20.95","wt: 2.95<br>mpg: 20.72","wt: 3<br>mpg: 20.5","wt: 3.05<br>mpg: 20.28","wt: 3.1<br>mpg: 20.07","wt: 3.15<br>mpg: 19.84","wt: 3.2<br>mpg: 19.59","wt: 3.25<br>mpg: 19.3","wt: 3.3<br>mpg: 18.94","wt: 3.34<br>mpg: 18.57","wt: 3.39<br>mpg: 18.21","wt: 3.44<br>mpg: 17.9","wt: 3.49<br>mpg: 17.62","wt: 3.54<br>mpg: 17.34","wt: 3.59<br>mpg: 17.08","wt: 3.64<br>mpg: 16.82","wt: 3.69<br>mpg: 16.56","wt: 3.74<br>mpg: 16.31","wt: 3.79<br>mpg: 16.08","wt: 3.84<br>mpg: 15.88","wt: 3.89<br>mpg: 15.7","wt: 3.94<br>mpg: 15.53","wt: 3.99<br>mpg: 15.35","wt: 4.04<br>mpg: 15.18","wt: 4.09<br>mpg: 15.01","wt: 4.14<br>mpg: 14.84","wt: 4.19<br>mpg: 14.67","wt: 4.24<br>mpg: 14.51","wt: 4.29<br>mpg: 14.35","wt: 4.33<br>mpg: 14.19","wt: 4.38<br>mpg: 14.04","wt: 4.43<br>mpg: 13.89","wt: 4.48<br>mpg: 13.74","wt: 4.53<br>mpg: 13.59","wt: 4.58<br>mpg: 13.45","wt: 4.63<br>mpg: 13.32","wt: 4.68<br>mpg: 13.18","wt: 4.73<br>mpg: 13.05","wt: 4.78<br>mpg: 12.93","wt: 4.83<br>mpg: 12.81","wt: 4.88<br>mpg: 12.7","wt: 4.93<br>mpg: 12.59","wt: 4.98<br>mpg: 12.48","wt: 5.03<br>mpg: 12.38","wt: 5.08<br>mpg: 12.29","wt: 5.13<br>mpg: 12.2","wt: 5.18<br>mpg: 12.12","wt: 5.23<br>mpg: 12.04","wt: 5.28<br>mpg: 11.97","wt: 5.32<br>mpg: 11.91","wt: 5.37<br>mpg: 11.85","wt: 5.42<br>mpg: 11.8"],"key":null,"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.77952755905512,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1.513,1.56250632911392,1.61201265822785,1.66151898734177,1.7110253164557,1.76053164556962,1.81003797468354,1.85954430379747,1.90905063291139,1.95855696202532,2.00806329113924,2.05756962025316,2.10707594936709,2.15658227848101,2.20608860759494,2.25559493670886,2.30510126582278,2.35460759493671,2.40411392405063,2.45362025316456,2.50312658227848,2.55263291139241,2.60213924050633,2.65164556962025,2.70115189873418,2.7506582278481,2.80016455696203,2.84967088607595,2.89917721518987,2.9486835443038,2.99818987341772,3.04769620253165,3.09720253164557,3.14670886075949,3.19621518987342,3.24572151898734,3.29522784810127,3.34473417721519,3.39424050632911,3.44374683544304,3.49325316455696,3.54275949367089,3.59226582278481,3.64177215189873,3.69127848101266,3.74078481012658,3.79029113924051,3.83979746835443,3.88930379746835,3.93881012658228,3.9883164556962,4.03782278481013,4.08732911392405,4.13683544303798,4.1863417721519,4.23584810126582,4.28535443037975,4.33486075949367,4.3843670886076,4.43387341772152,4.48337974683544,4.53288607594937,4.58239240506329,4.63189873417722,4.68140506329114,4.73091139240506,4.78041772151899,4.82992405063291,4.87943037974684,4.92893670886076,4.97844303797468,5.02794936708861,5.07745569620253,5.12696202531646,5.17646835443038,5.2259746835443,5.27548101265823,5.32498734177215,5.37449367088608,5.424,5.424,5.424,5.37449367088608,5.32498734177215,5.27548101265823,5.2259746835443,5.17646835443038,5.12696202531646,5.07745569620253,5.02794936708861,4.97844303797468,4.92893670886076,4.87943037974684,4.82992405063291,4.78041772151899,4.73091139240506,4.68140506329114,4.63189873417722,4.58239240506329,4.53288607594937,4.48337974683544,4.43387341772152,4.3843670886076,4.33486075949367,4.28535443037975,4.23584810126582,4.1863417721519,4.13683544303798,4.08732911392405,4.03782278481013,3.9883164556962,3.93881012658228,3.88930379746835,3.83979746835443,3.79029113924051,3.74078481012658,3.69127848101266,3.64177215189873,3.59226582278481,3.54275949367089,3.49325316455696,3.44374683544304,3.39424050632911,3.34473417721519,3.29522784810127,3.24572151898734,3.19621518987342,3.14670886075949,3.09720253164557,3.04769620253165,2.99818987341772,2.9486835443038,2.89917721518987,2.84967088607595,2.80016455696203,2.7506582278481,2.70115189873418,2.65164556962025,2.60213924050633,2.55263291139241,2.50312658227848,2.45362025316456,2.40411392405063,2.35460759493671,2.30510126582278,2.25559493670886,2.20608860759494,2.15658227848101,2.10707594936709,2.05756962025316,2.00806329113924,1.95855696202532,1.90905063291139,1.85954430379747,1.81003797468354,1.76053164556962,1.7110253164557,1.66151898734177,1.61201265822785,1.56250632911392,1.513,1.513],"y":[28.1482086220996,28.1543901127744,28.1099674436912,28.0124927543079,27.8597327000998,27.65029180851,27.3844510391609,27.0649645489388,26.6973896057635,26.2875171160579,25.8324317349282,25.3425270424539,24.8283183379919,24.2983639184935,23.760112467877,23.2206139894969,22.687036670636,22.1669802400544,21.6686013586079,21.2005795966642,20.7958707916955,20.4925717120642,20.2505759220062,20.029411327989,19.7997196881028,19.5493238069997,19.2825463474608,19.0136396315242,18.7710547647632,18.6211620442909,18.5230794674341,18.4189767758076,18.2669703402974,18.0571226848891,17.8114857990939,17.5530651234175,17.2593882498087,16.9389000862352,16.6206523252766,16.3538304090665,16.1088696663206,15.8521950118163,15.5982657057393,15.310315393258,14.9820175870996,14.6192730587362,14.2305037174933,13.8250338832656,13.4106256557153,12.9994899989408,12.6032526728482,12.2284161008376,11.878558950985,11.5555601503064,11.2602695449179,10.9928832380879,10.7531583791314,10.5405374596263,10.3542190987777,10.1931951633603,10.0562649052018,9.94203169291403,9.84888494120486,9.77496807618837,9.71813244341526,9.67587696866419,9.64527447672617,9.62288862080818,9.60469153661199,9.58600284245437,9.56148555087706,9.52525005390405,9.47112215607742,9.39310561955942,9.28599841671342,9.14602153848871,8.97125544941046,8.76172457616168,8.5191180560953,8.24628312123558,8.24628312123558,15.3494049247976,15.1782443171329,15.0506801235477,14.9692125042337,14.9351835247118,14.9482705398325,15.0062069422889,15.1048666511978,15.2387005670905,15.4013653802968,15.5863398235266,15.7873872169716,15.9988235013412,16.2156212231199,16.4334054461773,16.6483927518879,16.8573088932106,17.0573057240918,17.2458875182498,17.4208506299664,17.5802374021172,17.722304131482,17.8455029980558,17.9484787967813,18.0300830750312,18.0894112525512,18.1258734068239,18.1393185692856,18.1302495142201,18.1001980968109,18.052395913302,17.992998315261,17.9337037605149,17.9278205842869,17.997387550928,18.1331277981277,18.3248620530063,18.5598899048308,18.8278355913766,19.1323353384275,19.4479741193182,19.7907414467811,20.1951052727576,20.6294304842089,21.0412466954455,21.3662203964672,21.621879712876,21.8680897375516,22.1468907533599,22.4683335776407,22.8105228746346,23.1356166793108,23.4038654230847,23.5971856336257,23.7558811838804,23.9236113898757,24.1341059083815,24.4045945380386,24.7351260309263,25.1146352875006,25.5297003363769,25.967767871767,26.4238651014456,26.8952696318915,27.3787361600713,27.8704624508562,28.36621472764,28.8616410298881,29.3527880776299,29.8368122039277,30.3128267442494,30.7870881147566,31.2892470848656,31.8304564447746,32.4160709877363,33.0486423959696,33.7282491544298,34.4532933158925,35.2213390611659,36.0297360550404,28.1482086220996],"text":["wt: 1.51<br>mpg: 32.09","wt: 1.56<br>mpg: 31.69","wt: 1.61<br>mpg: 31.28","wt: 1.66<br>mpg: 30.87","wt: 1.71<br>mpg: 30.45","wt: 1.76<br>mpg: 30.03","wt: 1.81<br>mpg: 29.61","wt: 1.86<br>mpg: 29.18","wt: 1.91<br>mpg: 28.74","wt: 1.96<br>mpg: 28.3","wt: 2.01<br>mpg: 27.83","wt: 2.06<br>mpg: 27.35","wt: 2.11<br>mpg: 26.84","wt: 2.16<br>mpg: 26.33","wt: 2.21<br>mpg: 25.82","wt: 2.26<br>mpg: 25.3","wt: 2.31<br>mpg: 24.79","wt: 2.35<br>mpg: 24.3","wt: 2.4<br>mpg: 23.82","wt: 2.45<br>mpg: 23.37","wt: 2.5<br>mpg: 22.96","wt: 2.55<br>mpg: 22.61","wt: 2.6<br>mpg: 22.33","wt: 2.65<br>mpg: 22.08","wt: 2.7<br>mpg: 21.86","wt: 2.75<br>mpg: 21.65","wt: 2.8<br>mpg: 21.44","wt: 2.85<br>mpg: 21.21","wt: 2.9<br>mpg: 20.95","wt: 2.95<br>mpg: 20.72","wt: 3<br>mpg: 20.5","wt: 3.05<br>mpg: 20.28","wt: 3.1<br>mpg: 20.07","wt: 3.15<br>mpg: 19.84","wt: 3.2<br>mpg: 19.59","wt: 3.25<br>mpg: 19.3","wt: 3.3<br>mpg: 18.94","wt: 3.34<br>mpg: 18.57","wt: 3.39<br>mpg: 18.21","wt: 3.44<br>mpg: 17.9","wt: 3.49<br>mpg: 17.62","wt: 3.54<br>mpg: 17.34","wt: 3.59<br>mpg: 17.08","wt: 3.64<br>mpg: 16.82","wt: 3.69<br>mpg: 16.56","wt: 3.74<br>mpg: 16.31","wt: 3.79<br>mpg: 16.08","wt: 3.84<br>mpg: 15.88","wt: 3.89<br>mpg: 15.7","wt: 3.94<br>mpg: 15.53","wt: 3.99<br>mpg: 15.35","wt: 4.04<br>mpg: 15.18","wt: 4.09<br>mpg: 15.01","wt: 4.14<br>mpg: 14.84","wt: 4.19<br>mpg: 14.67","wt: 4.24<br>mpg: 14.51","wt: 4.29<br>mpg: 14.35","wt: 4.33<br>mpg: 14.19","wt: 4.38<br>mpg: 14.04","wt: 4.43<br>mpg: 13.89","wt: 4.48<br>mpg: 13.74","wt: 4.53<br>mpg: 13.59","wt: 4.58<br>mpg: 13.45","wt: 4.63<br>mpg: 13.32","wt: 4.68<br>mpg: 13.18","wt: 4.73<br>mpg: 13.05","wt: 4.78<br>mpg: 12.93","wt: 4.83<br>mpg: 12.81","wt: 4.88<br>mpg: 12.7","wt: 4.93<br>mpg: 12.59","wt: 4.98<br>mpg: 12.48","wt: 5.03<br>mpg: 12.38","wt: 5.08<br>mpg: 12.29","wt: 5.13<br>mpg: 12.2","wt: 5.18<br>mpg: 12.12","wt: 5.23<br>mpg: 12.04","wt: 5.28<br>mpg: 11.97","wt: 5.32<br>mpg: 11.91","wt: 5.37<br>mpg: 11.85","wt: 5.42<br>mpg: 11.8","wt: 5.42<br>mpg: 11.8","wt: 5.42<br>mpg: 11.8","wt: 5.37<br>mpg: 11.85","wt: 5.32<br>mpg: 11.91","wt: 5.28<br>mpg: 11.97","wt: 5.23<br>mpg: 12.04","wt: 5.18<br>mpg: 12.12","wt: 5.13<br>mpg: 12.2","wt: 5.08<br>mpg: 12.29","wt: 5.03<br>mpg: 12.38","wt: 4.98<br>mpg: 12.48","wt: 4.93<br>mpg: 12.59","wt: 4.88<br>mpg: 12.7","wt: 4.83<br>mpg: 12.81","wt: 4.78<br>mpg: 12.93","wt: 4.73<br>mpg: 13.05","wt: 4.68<br>mpg: 13.18","wt: 4.63<br>mpg: 13.32","wt: 4.58<br>mpg: 13.45","wt: 4.53<br>mpg: 13.59","wt: 4.48<br>mpg: 13.74","wt: 4.43<br>mpg: 13.89","wt: 4.38<br>mpg: 14.04","wt: 4.33<br>mpg: 14.19","wt: 4.29<br>mpg: 14.35","wt: 4.24<br>mpg: 14.51","wt: 4.19<br>mpg: 14.67","wt: 4.14<br>mpg: 14.84","wt: 4.09<br>mpg: 15.01","wt: 4.04<br>mpg: 15.18","wt: 3.99<br>mpg: 15.35","wt: 3.94<br>mpg: 15.53","wt: 3.89<br>mpg: 15.7","wt: 3.84<br>mpg: 15.88","wt: 3.79<br>mpg: 16.08","wt: 3.74<br>mpg: 16.31","wt: 3.69<br>mpg: 16.56","wt: 3.64<br>mpg: 16.82","wt: 3.59<br>mpg: 17.08","wt: 3.54<br>mpg: 17.34","wt: 3.49<br>mpg: 17.62","wt: 3.44<br>mpg: 17.9","wt: 3.39<br>mpg: 18.21","wt: 3.34<br>mpg: 18.57","wt: 3.3<br>mpg: 18.94","wt: 3.25<br>mpg: 19.3","wt: 3.2<br>mpg: 19.59","wt: 3.15<br>mpg: 19.84","wt: 3.1<br>mpg: 20.07","wt: 3.05<br>mpg: 20.28","wt: 3<br>mpg: 20.5","wt: 2.95<br>mpg: 20.72","wt: 2.9<br>mpg: 20.95","wt: 2.85<br>mpg: 21.21","wt: 2.8<br>mpg: 21.44","wt: 2.75<br>mpg: 21.65","wt: 2.7<br>mpg: 21.86","wt: 2.65<br>mpg: 22.08","wt: 2.6<br>mpg: 22.33","wt: 2.55<br>mpg: 22.61","wt: 2.5<br>mpg: 22.96","wt: 2.45<br>mpg: 23.37","wt: 2.4<br>mpg: 23.82","wt: 2.35<br>mpg: 24.3","wt: 2.31<br>mpg: 24.79","wt: 2.26<br>mpg: 25.3","wt: 2.21<br>mpg: 25.82","wt: 2.16<br>mpg: 26.33","wt: 2.11<br>mpg: 26.84","wt: 2.06<br>mpg: 27.35","wt: 2.01<br>mpg: 27.83","wt: 1.96<br>mpg: 28.3","wt: 1.91<br>mpg: 28.74","wt: 1.86<br>mpg: 29.18","wt: 1.81<br>mpg: 29.61","wt: 1.76<br>mpg: 30.03","wt: 1.71<br>mpg: 30.45","wt: 1.66<br>mpg: 30.87","wt: 1.61<br>mpg: 31.28","wt: 1.56<br>mpg: 31.69","wt: 1.51<br>mpg: 32.09","wt: 1.51<br>mpg: 32.09"],"key":null,"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(153,153,153,0.4)","hoveron":"points","hoverinfo":"x+y","showlegend":false,"xaxis":"x","yaxis":"y","name":""},{"x":[1.513,1.513],"y":[28.1482086220996,36.0297360550404],"type":"scatter","mode":"lines","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"}},{"x":[3.59226582278481,3.59226582278481],"y":[15.5982657057393,18.5598899048308],"type":"scatter","mode":"lines","line":{"fillcolor":"rgba(255,127,14,1)","color":"rgba(255,127,14,1)"}}],"layout":{"margin":{"t":27.8219030308404,"r":7.30593607305936,"b":41.7762409303838,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"type":"linear","autorange":false,"tickmode":"array","range":[1.31745,5.61955],"ticktext":["2","3","4","5"],"tickvals":[2,3,4,5],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"wt","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"type":"linear","autorange":false,"tickmode":"array","range":[6.85711047454534,37.4189087017306],"ticktext":["10","20","30"],"tickvals":[10,20,30],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"mpg","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","annotations":[{"text":"Maximum uncertainty","ax":60,"x":1.513,"y":32.08897233857},{"text":"Minimum uncertainty","x":3.59226582278481,"y":17.079077805285}]},"source":"A"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>Expose the pre-statistics data.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(crosstalk)
sd &lt;-<span class="st"> </span>SharedData$<span class="kw">new</span>(txhousing, ~year)
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(sd, <span class="kw">aes</span>(month, median)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group =</span> city)) +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;gam&quot;</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>year)
<span class="kw">ggplotly</span>(p) %&gt;%<span class="st"> </span><span class="kw">highlight</span>(<span class="st">&quot;plotly_hover&quot;</span>)</code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="a-case-study-of-housing-sales-in-texas.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="choosing-an-interface-sec-choosing.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cpsievert/plotly_book/edit/master/01-ggplotly-vs-plotly.Rmd",
"text": "Edit"
},
"download": ["bookdown.pdf", "bookdown.epub", "bookdown.mobi"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
