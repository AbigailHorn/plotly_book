<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>plotly for R</title>
  <meta name="description" content="An overview of the R package plotly">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="plotly for R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://ropensci.github.io/plotly/" />
  <meta property="og:image" content="http://ropensci.github.io/plotly/images/plotly.png" />
  <meta property="og:description" content="An overview of the R package plotly" />
  <meta name="github-repo" content="ropensci/plotly" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="plotly for R" />
  <meta name="twitter:site" content="@cpsievert" />
  <meta name="twitter:description" content="An overview of the R package plotly" />
  <meta name="twitter:image" content="http://ropensci.github.io/plotly/images/plotly.png" />

<meta name="author" content="Carson Sievert">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="hello-shiny.html">
<link rel="next" href="updating-views.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<link href="libs/jsoneditor/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding/jsonedit.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<link href="libs/colourpicker/colourpicker.min.css" rel="stylesheet" />
<script src="libs/colourpicker/colourpicker.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<link href="libs/ionrangeslider/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="libs/ionrangeslider/css/ion.rangeSlider.skinShiny.css" rel="stylesheet" />
<script src="libs/ionrangeslider/js/ion.rangeSlider.min.js"></script>
<script src="libs/strftime/strftime-min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/plotly.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i>Get started</a></li>
<li class="chapter" data-level="" data-path="plot-ly-for-collaboration.html"><a href="plot-ly-for-collaboration.html"><i class="fa fa-check"></i>plot.ly for collaboration</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="two-approaches-one-object.html"><a href="two-approaches-one-object.html"><i class="fa fa-check"></i><b>1</b> Two approaches, one object</a><ul>
<li class="chapter" data-level="1.1" data-path="txhousing-case-study.html"><a href="txhousing-case-study.html"><i class="fa fa-check"></i><b>1.1</b> A case study of housing sales in Texas</a><ul>
<li class="chapter" data-level="1.1.1" data-path="txhousing-case-study.html"><a href="txhousing-case-study.html#ggplotly"><i class="fa fa-check"></i><b>1.1.1</b> The <code>ggplotly()</code> function</a></li>
<li class="chapter" data-level="1.1.2" data-path="txhousing-case-study.html"><a href="txhousing-case-study.html#the-plot_ly-interface"><i class="fa fa-check"></i><b>1.1.2</b> The <code>plot_ly()</code> interface</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="extending-ggplotly.html"><a href="extending-ggplotly.html"><i class="fa fa-check"></i><b>1.2</b> Extending <code>ggplotly()</code></a><ul>
<li class="chapter" data-level="1.2.1" data-path="extending-ggplotly.html"><a href="extending-ggplotly.html#customizing-the-layout"><i class="fa fa-check"></i><b>1.2.1</b> Customizing the layout</a></li>
<li class="chapter" data-level="1.2.2" data-path="extending-ggplotly.html"><a href="extending-ggplotly.html#modifying-layers"><i class="fa fa-check"></i><b>1.2.2</b> Modifying layers</a></li>
<li class="chapter" data-level="1.2.3" data-path="extending-ggplotly.html"><a href="extending-ggplotly.html#leveraging-statistical-output"><i class="fa fa-check"></i><b>1.2.3</b> Leveraging statistical output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-plotly-cookbook.html"><a href="the-plotly-cookbook.html"><i class="fa fa-check"></i><b>2</b> The plotly cookbook</a><ul>
<li class="chapter" data-level="2.1" data-path="scatter-traces.html"><a href="scatter-traces.html"><i class="fa fa-check"></i><b>2.1</b> Scatter traces</a><ul>
<li class="chapter" data-level="2.1.1" data-path="scatter-traces.html"><a href="scatter-traces.html#scatterplots"><i class="fa fa-check"></i><b>2.1.1</b> Scatterplots</a></li>
<li class="chapter" data-level="2.1.2" data-path="scatter-traces.html"><a href="scatter-traces.html#dotplots-error-bars"><i class="fa fa-check"></i><b>2.1.2</b> Dotplots &amp; error bars</a></li>
<li class="chapter" data-level="2.1.3" data-path="scatter-traces.html"><a href="scatter-traces.html#line-plots"><i class="fa fa-check"></i><b>2.1.3</b> Line plots</a></li>
<li class="chapter" data-level="2.1.4" data-path="scatter-traces.html"><a href="scatter-traces.html#segments"><i class="fa fa-check"></i><b>2.1.4</b> Segments</a></li>
<li class="chapter" data-level="2.1.5" data-path="scatter-traces.html"><a href="scatter-traces.html#ribbons"><i class="fa fa-check"></i><b>2.1.5</b> Ribbons</a></li>
<li class="chapter" data-level="2.1.6" data-path="scatter-traces.html"><a href="scatter-traces.html#polygons"><i class="fa fa-check"></i><b>2.1.6</b> Polygons</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>2.2</b> Maps</a><ul>
<li class="chapter" data-level="2.2.1" data-path="maps.html"><a href="maps.html#using-scatter-traces"><i class="fa fa-check"></i><b>2.2.1</b> Using scatter traces</a></li>
<li class="chapter" data-level="2.2.2" data-path="maps.html"><a href="maps.html#choropleths"><i class="fa fa-check"></i><b>2.2.2</b> Choropleths</a></li>
<li class="chapter" data-level="2.2.3" data-path="maps.html"><a href="maps.html#using-geom_sf"><i class="fa fa-check"></i><b>2.2.3</b> Using <code>geom_sf()</code></a></li>
<li class="chapter" data-level="2.2.4" data-path="maps.html"><a href="maps.html#using-ggmap"><i class="fa fa-check"></i><b>2.2.4</b> Using ggmap</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="bars-histograms.html"><a href="bars-histograms.html"><i class="fa fa-check"></i><b>2.3</b> Bars &amp; histograms</a><ul>
<li class="chapter" data-level="2.3.1" data-path="bars-histograms.html"><a href="bars-histograms.html#multiple-numeric-distributions"><i class="fa fa-check"></i><b>2.3.1</b> Multiple numeric distributions</a></li>
<li class="chapter" data-level="2.3.2" data-path="bars-histograms.html"><a href="bars-histograms.html#multiple-discrete-distributions"><i class="fa fa-check"></i><b>2.3.2</b> Multiple discrete distributions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="boxplots.html"><a href="boxplots.html"><i class="fa fa-check"></i><b>2.4</b> Boxplots</a></li>
<li class="chapter" data-level="2.5" data-path="d-frequencies.html"><a href="d-frequencies.html"><i class="fa fa-check"></i><b>2.5</b> 2D frequencies</a><ul>
<li class="chapter" data-level="2.5.1" data-path="d-frequencies.html"><a href="d-frequencies.html#rectangular-binning-in-plotly.js"><i class="fa fa-check"></i><b>2.5.1</b> Rectangular binning in plotly.js</a></li>
<li class="chapter" data-level="2.5.2" data-path="d-frequencies.html"><a href="d-frequencies.html#rectangular-binning-in-r"><i class="fa fa-check"></i><b>2.5.2</b> Rectangular binning in R</a></li>
<li class="chapter" data-level="2.5.3" data-path="d-frequencies.html"><a href="d-frequencies.html#categorical-axes"><i class="fa fa-check"></i><b>2.5.3</b> Categorical axes</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="other-3d-plots.html"><a href="other-3d-plots.html"><i class="fa fa-check"></i><b>2.6</b> Other 3D plots</a></li>
<li class="chapter" data-level="2.7" data-path="raster-images.html"><a href="raster-images.html"><i class="fa fa-check"></i><b>2.7</b> Raster images</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="whats-a-data-view.html"><a href="whats-a-data-view.html"><i class="fa fa-check"></i><b>3</b> What’s a data view?</a></li>
<li class="chapter" data-level="4" data-path="arranging-multiple-views.html"><a href="arranging-multiple-views.html"><i class="fa fa-check"></i><b>4</b> Arranging multiple views</a><ul>
<li class="chapter" data-level="4.1" data-path="arranging-htmlwidgets.html"><a href="arranging-htmlwidgets.html"><i class="fa fa-check"></i><b>4.1</b> Arranging htmlwidgets</a></li>
<li class="chapter" data-level="4.2" data-path="merging-plotly-objects.html"><a href="merging-plotly-objects.html"><i class="fa fa-check"></i><b>4.2</b> Merging plotly objects</a><ul>
<li class="chapter" data-level="4.2.1" data-path="merging-plotly-objects.html"><a href="merging-plotly-objects.html#recursive-subplots"><i class="fa fa-check"></i><b>4.2.1</b> Recursive subplots</a></li>
<li class="chapter" data-level="4.2.2" data-path="merging-plotly-objects.html"><a href="merging-plotly-objects.html#ggplot2-subplots"><i class="fa fa-check"></i><b>4.2.2</b> ggplot2 subplots</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="navigating-many-views.html"><a href="navigating-many-views.html"><i class="fa fa-check"></i><b>4.3</b> Navigating many views</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linking-views-client-side.html"><a href="linking-views-client-side.html"><i class="fa fa-check"></i><b>5</b> Linking views client-side</a><ul>
<li class="chapter" data-level="5.1" data-path="graphical-queries.html"><a href="graphical-queries.html"><i class="fa fa-check"></i><b>5.1</b> Graphical queries</a></li>
<li class="chapter" data-level="5.2" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>5.2</b> Highlight versus filter events</a></li>
<li class="chapter" data-level="5.3" data-path="querying-examples.html"><a href="querying-examples.html"><i class="fa fa-check"></i><b>5.3</b> Examples</a><ul>
<li class="chapter" data-level="5.3.1" data-path="querying-examples.html"><a href="querying-examples.html#trellis-linking"><i class="fa fa-check"></i><b>5.3.1</b> Querying facetted charts</a></li>
<li class="chapter" data-level="5.3.2" data-path="querying-examples.html"><a href="querying-examples.html#statistical-queries"><i class="fa fa-check"></i><b>5.3.2</b> Statistical queries</a></li>
<li class="chapter" data-level="5.3.3" data-path="querying-examples.html"><a href="querying-examples.html#statistical-queries-ggplot"><i class="fa fa-check"></i><b>5.3.3</b> Statistical queries with <code>ggplotly()</code></a></li>
<li class="chapter" data-level="5.3.4" data-path="querying-examples.html"><a href="querying-examples.html#geo-spatial-queries"><i class="fa fa-check"></i><b>5.3.4</b> Geo-spatial queries</a></li>
<li class="chapter" data-level="5.3.5" data-path="querying-examples.html"><a href="querying-examples.html#linking-with-other-htmlwidgets"><i class="fa fa-check"></i><b>5.3.5</b> Linking with other htmlwidgets</a></li>
<li class="chapter" data-level="5.3.6" data-path="querying-examples.html"><a href="querying-examples.html#generalized-pairs-plots"><i class="fa fa-check"></i><b>5.3.6</b> Generalized pairs plots</a></li>
<li class="chapter" data-level="5.3.7" data-path="querying-examples.html"><a href="querying-examples.html#querying-diagnostic-plots"><i class="fa fa-check"></i><b>5.3.7</b> Querying diagnostic plots</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="limitations.html"><a href="limitations.html"><i class="fa fa-check"></i><b>5.4</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="linking-server-side.html"><a href="linking-server-side.html"><i class="fa fa-check"></i><b>6</b> Linking views server-side</a><ul>
<li class="chapter" data-level="6.1" data-path="hello-shiny.html"><a href="hello-shiny.html"><i class="fa fa-check"></i><b>6.1</b> Embedding plotly in shiny</a><ul>
<li class="chapter" data-level="6.1.1" data-path="hello-shiny.html"><a href="hello-shiny.html#your-first-shiny-app"><i class="fa fa-check"></i><b>6.1.1</b> Your first shiny app</a></li>
<li class="chapter" data-level="6.1.2" data-path="hello-shiny.html"><a href="hello-shiny.html#hiding-and-redrawing-on-resize"><i class="fa fa-check"></i><b>6.1.2</b> Hiding and redrawing on resize</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="plotly-inputs.html"><a href="plotly-inputs.html"><i class="fa fa-check"></i><b>6.2</b> Accessing plotly input events</a></li>
<li class="chapter" data-level="6.3" data-path="updating-views.html"><a href="updating-views.html"><i class="fa fa-check"></i><b>6.3</b> Responding to input events</a><ul>
<li class="chapter" data-level="6.3.1" data-path="updating-views.html"><a href="updating-views.html#the-data-pipeline"><i class="fa fa-check"></i><b>6.3.1</b> The data pipeline</a></li>
<li class="chapter" data-level="6.3.2" data-path="updating-views.html"><a href="updating-views.html#persistent-selection"><i class="fa fa-check"></i><b>6.3.2</b> Persistent selection</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="shiny-performance.html"><a href="shiny-performance.html"><i class="fa fa-check"></i><b>6.4</b> Improving performance</a><ul>
<li class="chapter" data-level="6.4.1" data-path="shiny-performance.html"><a href="shiny-performance.html#proxies"><i class="fa fa-check"></i><b>6.4.1</b> Partial plotly updates</a></li>
<li class="chapter" data-level="6.4.2" data-path="shiny-performance.html"><a href="shiny-performance.html#partial-update-examples"><i class="fa fa-check"></i><b>6.4.2</b> Partial update examples</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="advanced-applications.html"><a href="advanced-applications.html"><i class="fa fa-check"></i><b>6.5</b> Advanced applications</a><ul>
<li class="chapter" data-level="6.5.1" data-path="advanced-applications.html"><a href="advanced-applications.html#drill-down"><i class="fa fa-check"></i><b>6.5.1</b> Drill-down</a></li>
<li class="chapter" data-level="6.5.2" data-path="advanced-applications.html"><a href="advanced-applications.html#cross-filter"><i class="fa fa-check"></i><b>6.5.2</b> Cross-filter</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6.6</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="animating-views.html"><a href="animating-views.html"><i class="fa fa-check"></i><b>7</b> Animating views</a><ul>
<li class="chapter" data-level="7.1" data-path="key-frame-animations.html"><a href="key-frame-animations.html"><i class="fa fa-check"></i><b>7.1</b> Key frame animations</a></li>
<li class="chapter" data-level="7.2" data-path="linking-animated-views.html"><a href="linking-animated-views.html"><i class="fa fa-check"></i><b>7.2</b> Linking animated views</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>8</b> Advanced topics</a><ul>
<li class="chapter" data-level="8.1" data-path="javascript.html"><a href="javascript.html"><i class="fa fa-check"></i><b>8.1</b> Custom behavior via JavaScript</a></li>
<li class="chapter" data-level="8.2" data-path="translating-custom-ggplot2-geoms.html"><a href="translating-custom-ggplot2-geoms.html"><i class="fa fa-check"></i><b>8.2</b> Translating custom ggplot2 geoms</a></li>
<li class="chapter" data-level="8.3" data-path="designing-an-htmlwidget-interface.html"><a href="designing-an-htmlwidget-interface.html"><i class="fa fa-check"></i><b>8.3</b> Designing an htmlwidget interface</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">plotly for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="plotly-inputs" class="section level2">
<h2><span class="header-section-number">6.2</span> Accessing plotly input events</h2>
<p>Section <a href="hello-shiny.html#fig:shiny-intro">6.1</a> covered how to render <strong>shiny</strong> output widgets (e.g., <code>plotlyOutput()</code>) that depend on a input widget, but what about having an output act like an input to another output? For example, say we’d like to dynamically generate a bar chart (i.e., and output) based on a point clicked on a scatter-plot (i.e., an input event tied to an output widget). In addition to <strong>shiny</strong>’s static graph and image rendering functions (e.g., <code>plotOutput()</code>/<code>imageOutput()</code>), there are a handful of other R packages that expose user interaction with “output” widget(s) as input value(s). <span class="citation">Cheng (<a href="#ref-leaflet-shiny">2018</a><a href="#ref-leaflet-shiny">c</a>)</span> and <span class="citation">Xie (<a href="#ref-DT-shiny">2018</a>)</span> describe the interface for the <strong>leaflet</strong> and <strong>DT</strong> packages. This section outlines the interface for <code>plotlyOutput()</code>. This sort of functionality plays a vital role in linking of views through direct manipulation, similar to what we’ve already seen in section <a href="graphical-queries.html#graphical-queries">5.1</a>, but having access to these events on a <strong>shiny</strong> server allows great flexibility on how we choose to respond in other views (section <a href="updating-views.html#updating-views">6.3</a>).</p>
<p>The <code>event_data()</code> function is the most straight-forward way to access a <strong>plotly</strong> input events in <strong>shiny</strong>. Although <code>event_data()</code> is function, it accesses a <strong>shiny</strong> input value, so just like any other input value, it needs to be used inside a reactive context. Most of these available events are data-specific traces (e.g., <code>"plotly_hover"</code>, <code>"plotly_click"</code>, <code>"plotly_selected"</code>, etc), but there are also some that are layout-specific (e.g., <code>"plotly_relayout"</code>). Most plotly.js events<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a> are accessible through this interface – for a complete list see the <code>help(event_data)</code> documentation page.</p>
<p>The <strong>shiny</strong> app in Figure <a href="plotly-inputs.html#fig:plotlyEvents">6.3</a> shows you how to access common trace events and print verbatim the corresponding data via <code>renderPrint()</code>. When using this event data to inform (i.e., update) another related data view, it’s often necessary to know exactly what row(s) of data were queried in the event (i.e., the <code>x</code>/<code>y</code> positions alone may not be enough to uniquely identify a piece of information). For this reason, if a <code>key</code> attribute is supplied through to <code>plot_ly()</code>, or a <code>key</code> aesthetic to <strong>ggplot2</strong>, that information will be relayed along with the input event.</p>
<p>There are currently four different modes for click+drag interactions in plotly.js, but only two will trigger a <code>"plotly_selected"</code> event: rectangular and lasso selection. The other two drag modes, zoom and pan, both emit a <code>"plotly_relayout"</code> event which could be useful for, say, recomputing a model based on new x/y limits. Figure <a href="plotly-inputs.html#fig:plotlyEvents">6.3</a> uses <a href="https://plot.ly/r/reference/#layout-dragmode">dragmode</a> attribute to set the default click+drag mode rectangular selection, but the mode can also be changed interactively via the mode bar at the top of the graph.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb104-2" title="2"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb104-3" title="3"></a>
<a class="sourceLine" id="cb104-4" title="4">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb104-5" title="5">  <span class="kw">radioButtons</span>(<span class="st">&quot;plotType&quot;</span>, <span class="st">&quot;Plot Type:&quot;</span>, <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;ggplotly&quot;</span>, <span class="st">&quot;plotly&quot;</span>)),</a>
<a class="sourceLine" id="cb104-6" title="6">  <span class="kw">plotlyOutput</span>(<span class="st">&quot;plot&quot;</span>),</a>
<a class="sourceLine" id="cb104-7" title="7">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;hover&quot;</span>),</a>
<a class="sourceLine" id="cb104-8" title="8">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;click&quot;</span>),</a>
<a class="sourceLine" id="cb104-9" title="9">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;brush&quot;</span>)</a>
<a class="sourceLine" id="cb104-10" title="10">)</a>
<a class="sourceLine" id="cb104-11" title="11"></a>
<a class="sourceLine" id="cb104-12" title="12">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb104-13" title="13">  </a>
<a class="sourceLine" id="cb104-14" title="14">  nms &lt;-<span class="st"> </span><span class="kw">row.names</span>(mtcars)</a>
<a class="sourceLine" id="cb104-15" title="15">  </a>
<a class="sourceLine" id="cb104-16" title="16">  output<span class="op">$</span>plot &lt;-<span class="st"> </span><span class="kw">renderPlotly</span>({</a>
<a class="sourceLine" id="cb104-17" title="17">    p &lt;-<span class="st"> </span><span class="cf">if</span> (<span class="kw">identical</span>(input<span class="op">$</span>plotType, <span class="st">&quot;ggplotly&quot;</span>)) {</a>
<a class="sourceLine" id="cb104-18" title="18">      <span class="kw">ggplotly</span>(</a>
<a class="sourceLine" id="cb104-19" title="19">        <span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt, <span class="dt">key =</span> nms)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb104-20" title="20">      )</a>
<a class="sourceLine" id="cb104-21" title="21">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb104-22" title="22">      <span class="kw">plot_ly</span>(mtcars, <span class="dt">x =</span> <span class="op">~</span>mpg, <span class="dt">y =</span> <span class="op">~</span>wt, <span class="dt">key =</span> nms)</a>
<a class="sourceLine" id="cb104-23" title="23">    }</a>
<a class="sourceLine" id="cb104-24" title="24">    <span class="kw">layout</span>(p, <span class="dt">dragmode =</span> <span class="st">&quot;select&quot;</span>)</a>
<a class="sourceLine" id="cb104-25" title="25">  })</a>
<a class="sourceLine" id="cb104-26" title="26">  </a>
<a class="sourceLine" id="cb104-27" title="27">  output<span class="op">$</span>hover &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb104-28" title="28">    d &lt;-<span class="st"> </span><span class="kw">event_data</span>(<span class="st">&quot;plotly_hover&quot;</span>)</a>
<a class="sourceLine" id="cb104-29" title="29">    <span class="cf">if</span> (<span class="kw">is.null</span>(d)) <span class="st">&quot;Hover events appear here (unhover to clear)&quot;</span> <span class="cf">else</span> d</a>
<a class="sourceLine" id="cb104-30" title="30">  })</a>
<a class="sourceLine" id="cb104-31" title="31">  </a>
<a class="sourceLine" id="cb104-32" title="32">  output<span class="op">$</span>click &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb104-33" title="33">    d &lt;-<span class="st"> </span><span class="kw">event_data</span>(<span class="st">&quot;plotly_click&quot;</span>)</a>
<a class="sourceLine" id="cb104-34" title="34">    <span class="cf">if</span> (<span class="kw">is.null</span>(d)) <span class="st">&quot;Click events appear here (double-click to clear)&quot;</span> <span class="cf">else</span> d</a>
<a class="sourceLine" id="cb104-35" title="35">  })</a>
<a class="sourceLine" id="cb104-36" title="36">  </a>
<a class="sourceLine" id="cb104-37" title="37">  output<span class="op">$</span>brush &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb104-38" title="38">    d &lt;-<span class="st"> </span><span class="kw">event_data</span>(<span class="st">&quot;plotly_selected&quot;</span>)</a>
<a class="sourceLine" id="cb104-39" title="39">    <span class="cf">if</span> (<span class="kw">is.null</span>(d)) <span class="st">&quot;Click and drag events (i.e., select/lasso) appear here (double-click to clear)&quot;</span> <span class="cf">else</span> d</a>
<a class="sourceLine" id="cb104-40" title="40">  })</a>
<a class="sourceLine" id="cb104-41" title="41">  </a>
<a class="sourceLine" id="cb104-42" title="42">}</a>
<a class="sourceLine" id="cb104-43" title="43"></a>
<a class="sourceLine" id="cb104-44" title="44"><span class="kw">shinyApp</span>(ui, server, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">display.mode =</span> <span class="st">&quot;showcase&quot;</span>))</a></code></pre></div>
<div class="figure"><span id="fig:plotlyEvents"></span>
<img src="https://i.imgur.com/z6xNTtX.gif" alt="A video demonstration of plotly events in shiny. The video can be accessed [here](https://i.imgur.com/z6xNTtX.gif)" width="100%" />
<p class="caption">
Figure 6.3: A video demonstration of plotly events in shiny. The video can be accessed <a href="https://i.imgur.com/z6xNTtX.gif">here</a>
</p>
</div>
<p>The <code>"plotly_click"</code> and <code>"plotly_hover"</code> events are supported for nearly every trace type (there are currently 35 types!), but <code>plotly_selected</code> is generally only available for 2D charts (i.e., it won’t work for <code>scatter3d</code>, <code>surface</code>, <code>mesh</code>, etc.). One 2D trace type that does not support any of these events is <code>parcoords</code> – it’s overall design is quite different from the others in that it natively supports brushing lines along an axis dimension. However, as Figure <a href="plotly-inputs.html#fig:shiny-parcoords">6.4</a> demonstrates, these brush events emit a <code>plotly_restyle</code> event with the range(s) of the highlighted dimension.<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a></p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb105-2" title="2"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb105-3" title="3"></a>
<a class="sourceLine" id="cb105-4" title="4">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb105-5" title="5">  <span class="kw">plotlyOutput</span>(<span class="st">&quot;parcoords&quot;</span>),</a>
<a class="sourceLine" id="cb105-6" title="6">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;info&quot;</span>)</a>
<a class="sourceLine" id="cb105-7" title="7">)</a>
<a class="sourceLine" id="cb105-8" title="8"></a>
<a class="sourceLine" id="cb105-9" title="9">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb105-10" title="10">  </a>
<a class="sourceLine" id="cb105-11" title="11">  output<span class="op">$</span>parcoords &lt;-<span class="st"> </span><span class="kw">renderPlotly</span>({</a>
<a class="sourceLine" id="cb105-12" title="12">    <span class="kw">plot_ly</span>(iris) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb105-13" title="13"><span class="st">      </span><span class="kw">add_parcoords</span>()</a>
<a class="sourceLine" id="cb105-14" title="14">  })</a>
<a class="sourceLine" id="cb105-15" title="15">  </a>
<a class="sourceLine" id="cb105-16" title="16">  output<span class="op">$</span>info &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb105-17" title="17">    d &lt;-<span class="st"> </span><span class="kw">event_data</span>(<span class="st">&quot;plotly_restyle&quot;</span>)</a>
<a class="sourceLine" id="cb105-18" title="18">    <span class="cf">if</span> (<span class="kw">is.null</span>(d)) <span class="st">&quot;Brush along a dimension&quot;</span> <span class="cf">else</span> d</a>
<a class="sourceLine" id="cb105-19" title="19">  })</a>
<a class="sourceLine" id="cb105-20" title="20">  </a>
<a class="sourceLine" id="cb105-21" title="21">}</a>
<a class="sourceLine" id="cb105-22" title="22"></a>
<a class="sourceLine" id="cb105-23" title="23"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<div class="figure"><span id="fig:shiny-parcoords"></span>
<img src="https://i.imgur.com/2f7MGCd.gif" alt="Using the `plotly_restyle` event to access brushed dimensions of a parallel coordinates plot." width="100%" />
<p class="caption">
Figure 6.4: Using the <code>plotly_restyle</code> event to access brushed dimensions of a parallel coordinates plot.
</p>
</div>
<p>Beyond the <code>parcoords</code> edge case, the <code>plotly_restyle</code> and <code>plotly_relayout</code> events can also be used to detect any changes to plotly.js traces (restyle) and layout (relayout). More specifically, these events are emitted whenever the plotly.js functions <code>Plotly.restyle()</code> or <code>Plotly.relayout()</code> are called. As shown in section <a href="shiny-performance.html#proxies">6.4.1</a>, these functions are handy for partially modifying an existing plot (i.e., avoid performing a full redraw), and we can leverage them from R in a <strong>shiny</strong> app. As it turns out, sometimes these events are fired as a part of another, higher-order task, like dragging shapes.</p>
<p>Figure <a href="plotly-inputs.html#fig:shiny-drag-circle">6.5</a> demonstrates dragging a circle shape and accessing the new positions of the circle though the <code>plotly_relayout</code> event. The ability to drag shapes can be enabled through the <code>config()</code> function through the <code>edits</code> attribute. This attribute allows you enable direct manipulation of certain aspects of the layout (note that traces can not be edited). In this case, we only want to drag shapes, but one could use <code>config(p, editable = TRUE)</code> to make everything in the layout editable (e.g. the plot and axis titles).</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb106-2" title="2"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb106-3" title="3"></a>
<a class="sourceLine" id="cb106-4" title="4">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb106-5" title="5">  <span class="kw">plotlyOutput</span>(<span class="st">&quot;p&quot;</span>),</a>
<a class="sourceLine" id="cb106-6" title="6">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;event&quot;</span>)</a>
<a class="sourceLine" id="cb106-7" title="7">)</a>
<a class="sourceLine" id="cb106-8" title="8"></a>
<a class="sourceLine" id="cb106-9" title="9">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb106-10" title="10">  </a>
<a class="sourceLine" id="cb106-11" title="11">  output<span class="op">$</span>p &lt;-<span class="st"> </span><span class="kw">renderPlotly</span>({</a>
<a class="sourceLine" id="cb106-12" title="12">    <span class="kw">plot_ly</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-13" title="13"><span class="st">      </span><span class="kw">layout</span>(</a>
<a class="sourceLine" id="cb106-14" title="14">        <span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb106-15" title="15">        <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb106-16" title="16">        <span class="dt">shapes =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb106-17" title="17">          <span class="dt">type =</span> <span class="st">&quot;circle&quot;</span>, </a>
<a class="sourceLine" id="cb106-18" title="18">          <span class="dt">fillcolor =</span> <span class="st">&quot;gray&quot;</span>,</a>
<a class="sourceLine" id="cb106-19" title="19">          <span class="dt">line =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&quot;gray&quot;</span>),</a>
<a class="sourceLine" id="cb106-20" title="20">          <span class="dt">x0 =</span> <span class="dv">-10</span>, <span class="dt">x1 =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb106-21" title="21">          <span class="dt">y0 =</span> <span class="dv">-10</span>, <span class="dt">y1 =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb106-22" title="22">          <span class="dt">xsizemode =</span> <span class="st">&quot;pixel&quot;</span>, </a>
<a class="sourceLine" id="cb106-23" title="23">          <span class="dt">ysizemode =</span> <span class="st">&quot;pixel&quot;</span>,</a>
<a class="sourceLine" id="cb106-24" title="24">          <span class="dt">xanchor =</span> <span class="dv">0</span>, <span class="dt">yanchor =</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb106-25" title="25">        )</a>
<a class="sourceLine" id="cb106-26" title="26">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-27" title="27"><span class="st">      </span><span class="kw">config</span>(<span class="dt">edits =</span> <span class="kw">list</span>(<span class="dt">shapePosition =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb106-28" title="28">  })</a>
<a class="sourceLine" id="cb106-29" title="29">  </a>
<a class="sourceLine" id="cb106-30" title="30">  output<span class="op">$</span>event &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb106-31" title="31">    <span class="kw">event_data</span>(<span class="st">&quot;plotly_relayout&quot;</span>)</a>
<a class="sourceLine" id="cb106-32" title="32">  })</a>
<a class="sourceLine" id="cb106-33" title="33">  </a>
<a class="sourceLine" id="cb106-34" title="34">}</a>
<a class="sourceLine" id="cb106-35" title="35"></a>
<a class="sourceLine" id="cb106-36" title="36"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<div class="figure"><span id="fig:shiny-drag-circle"></span>
<img src="https://i.imgur.com/FUxQXbY.gif" alt="Dragging a circle shape and accessing the positions in **shiny** via `event_data('plotly_relayout')`" width="100%" />
<p class="caption">
Figure 6.5: Dragging a circle shape and accessing the positions in <strong>shiny</strong> via <code>event_data('plotly_relayout')</code>
</p>
</div>
<p>Figure <a href="plotly-inputs.html#fig:shiny-drag-line">6.6</a> uses the ability to react to the dragging of shapes to snap a vertical line shape to the closest point in a sequence of x values. It also places on a marker at the intersection of this vertical line shape and a line chart of random y values. Notice how, by accessing <code>event_data()</code> in this way (i.e., the source and target view of the event is the same), the chart is actually fully redrawn every time the line shape moves. If performance were an issue (i.e., we were dealing with lots of lines), this type of interaction likely won’t be very responsive. In that case, you can use <code>event_data()</code> to trigger side-effects (i.e., partially modify the plot) which is covered in <a href="shiny-performance.html#proxies">6.4.1</a>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb107-2" title="2"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb107-3" title="3"></a>
<a class="sourceLine" id="cb107-4" title="4">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb107-5" title="5">  <span class="kw">plotlyOutput</span>(<span class="st">&quot;p&quot;</span>),</a>
<a class="sourceLine" id="cb107-6" title="6">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;event&quot;</span>)</a>
<a class="sourceLine" id="cb107-7" title="7">)</a>
<a class="sourceLine" id="cb107-8" title="8"></a>
<a class="sourceLine" id="cb107-9" title="9">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb107-10" title="10">y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb107-11" title="11"></a>
<a class="sourceLine" id="cb107-12" title="12">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb107-13" title="13">  </a>
<a class="sourceLine" id="cb107-14" title="14">  output<span class="op">$</span>p &lt;-<span class="st"> </span><span class="kw">renderPlotly</span>({</a>
<a class="sourceLine" id="cb107-15" title="15">    d &lt;-<span class="st"> </span><span class="kw">event_data</span>(<span class="st">&quot;plotly_relayout&quot;</span>)</a>
<a class="sourceLine" id="cb107-16" title="16">    selected_point &lt;-<span class="st"> </span><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(d[[<span class="st">&quot;shapes[0].x0&quot;</span>]])) {</a>
<a class="sourceLine" id="cb107-17" title="17">      <span class="co"># &#39;snap&#39; the x-position from the event to the closest `x` value</span></a>
<a class="sourceLine" id="cb107-18" title="18">      xint &lt;-<span class="st"> </span>d[[<span class="st">&quot;shapes[0].x0&quot;</span>]]</a>
<a class="sourceLine" id="cb107-19" title="19">      xpt &lt;-<span class="st"> </span>x[<span class="kw">which.min</span>(<span class="kw">abs</span>(x <span class="op">-</span><span class="st"> </span>xint))]</a>
<a class="sourceLine" id="cb107-20" title="20">      <span class="kw">list</span>(<span class="dt">x =</span> xpt, <span class="dt">y =</span> y[<span class="kw">which</span>(x <span class="op">==</span><span class="st"> </span>xpt)])</a>
<a class="sourceLine" id="cb107-21" title="21">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb107-22" title="22">      <span class="co"># default to </span></a>
<a class="sourceLine" id="cb107-23" title="23">      <span class="kw">list</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> y[<span class="kw">which</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)])</a>
<a class="sourceLine" id="cb107-24" title="24">    }</a>
<a class="sourceLine" id="cb107-25" title="25">    </a>
<a class="sourceLine" id="cb107-26" title="26">    <span class="kw">plot_ly</span>(<span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;red&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-27" title="27"><span class="st">      </span><span class="kw">add_lines</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-28" title="28"><span class="st">      </span><span class="kw">add_markers</span>(<span class="dt">x =</span> selected_point<span class="op">$</span>x, <span class="dt">y =</span> selected_point<span class="op">$</span>y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-29" title="29"><span class="st">      </span><span class="kw">layout</span>(</a>
<a class="sourceLine" id="cb107-30" title="30">        <span class="dt">shapes =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb107-31" title="31">          <span class="dt">type =</span> <span class="st">&quot;line&quot;</span>, </a>
<a class="sourceLine" id="cb107-32" title="32">          <span class="dt">line =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">dash =</span> <span class="st">&quot;dot&quot;</span>),</a>
<a class="sourceLine" id="cb107-33" title="33">          <span class="dt">x0 =</span> selected_point<span class="op">$</span>x, </a>
<a class="sourceLine" id="cb107-34" title="34">          <span class="dt">x1 =</span> selected_point<span class="op">$</span>x,</a>
<a class="sourceLine" id="cb107-35" title="35">          <span class="dt">y0 =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb107-36" title="36">          <span class="dt">y1 =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb107-37" title="37">          <span class="dt">yref =</span> <span class="st">&quot;paper&quot;</span></a>
<a class="sourceLine" id="cb107-38" title="38">        )</a>
<a class="sourceLine" id="cb107-39" title="39">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-40" title="40"><span class="st">      </span><span class="kw">config</span>(<span class="dt">editable =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb107-41" title="41">  })</a>
<a class="sourceLine" id="cb107-42" title="42">  </a>
<a class="sourceLine" id="cb107-43" title="43">}</a>
<a class="sourceLine" id="cb107-44" title="44"></a>
<a class="sourceLine" id="cb107-45" title="45"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<div class="figure"><span id="fig:shiny-drag-line"></span>
<img src="https://i.imgur.com/JhrM5US.gif" alt="Dragging a vertical line shape and 'snapping' the line to match the closest provided `x` value. " width="100%" />
<p class="caption">
Figure 6.6: Dragging a vertical line shape and ‘snapping’ the line to match the closest provided <code>x</code> value.
</p>
</div>
<p>In summary, it’s possible to obtain information about direct manipulation events with a <strong>plotly</strong> graph through referencing <code>event_data()</code> in a <strong>shiny</strong> reactive expression. Section <a href="updating-views.html#updating-views">6.3</a> covers how to use this information to inform other views in a <strong>shiny</strong> application. Section <a href="#targeting-views"><strong>??</strong></a> discusses how to scope these events to specific views and section <a href="shiny-performance.html#proxies">6.4.1</a> and discusses helpful techniques for ensuring your <strong>shiny</strong> application is responsive as possible. For sake of comparison and to enhance the discussion, the next section discusses accessing similar events using <code>shiny::plotOutput()</code>.</p>
<!--
### Accessing static plot events {#static-inputs}

The **shiny** package provides access to direct manipulation events made with plots generated with the R graphics device as well any raster-based image. The model for providing access is substaintially different from **plotly** 
-->
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-leaflet-shiny">
<p>Cheng, Joe. 2018c. <em>Using Leaflet with Shiny</em>. Blog. <a href="https://rstudio.github.io/leaflet/shiny.html">https://rstudio.github.io/leaflet/shiny.html</a>.</p>
</div>
<div id="ref-DT-shiny">
<p>Xie, Yihui. 2018. <em>Using Leaflet with Shiny</em>. Blog. <a href="https://rstudio.github.io/DT/shiny.html">https://rstudio.github.io/DT/shiny.html</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="23">
<li id="fn23"><p>These events are documented at <a href="plotly-inputs.html#fnref23" class="footnote-back">↩</a></p></li>
<li id="fn24"><p>To see how to map these ranges back to the highlighted observations, see the example <code>plotly_example("shiny", "event_data_parcoords")</code><a href="plotly-inputs.html#fnref24" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hello-shiny.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="updating-views.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cpsievert/plotly_book/edit/master/linked-views-shiny.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-39373211-1', 'auto');ga('send', 'pageview');</script>
</body>

</html>
