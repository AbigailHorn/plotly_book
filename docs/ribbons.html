<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>4.4 Ribbons | Interactive web-based data visualization with R, plotly, and shiny</title>
  <meta name="description" content="A book example for a Chapman &amp; Hall book.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="4.4 Ribbons | Interactive web-based data visualization with R, plotly, and shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book example for a Chapman &amp; Hall book." />
  <meta name="github-repo" content="ropensci/plotly" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.4 Ribbons | Interactive web-based data visualization with R, plotly, and shiny" />
  <meta name="twitter:site" content="@cpsievert" />
  <meta name="twitter:description" content="A book example for a Chapman &amp; Hall book." />
  

<meta name="author" content="Carson Sievert">


<meta name="date" content="2019-01-22">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="segments.html">
<link rel="next" href="polygons.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<link href="libs/colourpicker/colourpicker.min.css" rel="stylesheet" />
<script src="libs/colourpicker/colourpicker.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/plotly.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/summary-fix.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="what-you-will-learn.html"><a href="what-you-will-learn.html"><i class="fa fa-check"></i><b>1.1</b> What you will learn</a></li>
<li class="chapter" data-level="1.2" data-path="how-this-book-is-organized.html"><a href="how-this-book-is-organized.html"><i class="fa fa-check"></i><b>1.2</b> How this book is organized</a></li>
<li class="chapter" data-level="1.3" data-path="what-you-wont-learn.html"><a href="what-you-wont-learn.html"><i class="fa fa-check"></i><b>1.3</b> What you wonâ€™t learn</a><ul>
<li class="chapter" data-level="1.3.1" data-path="what-you-wont-learn.html"><a href="what-you-wont-learn.html#web-technologies"><i class="fa fa-check"></i><b>1.3.1</b> Web technologies</a></li>
<li class="chapter" data-level="1.3.2" data-path="what-you-wont-learn.html"><a href="what-you-wont-learn.html#d3js"><i class="fa fa-check"></i><b>1.3.2</b> d3js</a></li>
<li class="chapter" data-level="1.3.3" data-path="what-you-wont-learn.html"><a href="what-you-wont-learn.html#ggplot2"><i class="fa fa-check"></i><b>1.3.3</b> ggplot2</a></li>
<li class="chapter" data-level="1.3.4" data-path="what-you-wont-learn.html"><a href="what-you-wont-learn.html#graphical-data-analysis"><i class="fa fa-check"></i><b>1.3.4</b> Graphical data analysis</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>1.4</b> Prerequisites</a></li>
<li class="chapter" data-level="1.5" data-path="run-code-examples.html"><a href="run-code-examples.html"><i class="fa fa-check"></i><b>1.5</b> Run code examples</a></li>
<li class="chapter" data-level="1.6" data-path="getting-help-and-learning-more.html"><a href="getting-help-and-learning-more.html"><i class="fa fa-check"></i><b>1.6</b> Getting help and learning more</a></li>
<li class="chapter" data-level="1.7" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.8" data-path="colophon.html"><a href="colophon.html"><i class="fa fa-check"></i><b>1.8</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="why-web-graphics.html"><a href="why-web-graphics.html"><i class="fa fa-check"></i><b>2</b> Why interactive web graphics in R?</a></li>
<li class="part"><span><b>I Creating views</b></span></li>
<li class="chapter" data-level="3" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>3</b> Introduction</a></li>
<li class="chapter" data-level="4" data-path="scatter-traces.html"><a href="scatter-traces.html"><i class="fa fa-check"></i><b>4</b> Scatter traces</a><ul>
<li class="chapter" data-level="4.1" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i><b>4.1</b> Scatterplots</a><ul>
<li class="chapter" data-level="4.1.1" data-path="scatterplots.html"><a href="scatterplots.html#d-scatterplots"><i class="fa fa-check"></i><b>4.1.1</b> 3D scatterplots</a></li>
<li class="chapter" data-level="4.1.2" data-path="scatterplots.html"><a href="scatterplots.html#scatterplot-matrices"><i class="fa fa-check"></i><b>4.1.2</b> Scatterplot matrices</a></li>
<li class="chapter" data-level="4.1.3" data-path="scatterplots.html"><a href="scatterplots.html#dotplots-error-bars"><i class="fa fa-check"></i><b>4.1.3</b> Dotplots &amp; error bars</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="line-plots.html"><a href="line-plots.html"><i class="fa fa-check"></i><b>4.2</b> Line plots</a><ul>
<li class="chapter" data-level="4.2.1" data-path="line-plots.html"><a href="line-plots.html#density-plots"><i class="fa fa-check"></i><b>4.2.1</b> Density plots</a></li>
<li class="chapter" data-level="4.2.2" data-path="line-plots.html"><a href="line-plots.html#parallel-coordinates"><i class="fa fa-check"></i><b>4.2.2</b> Parallel Coordinates</a></li>
<li class="chapter" data-level="4.2.3" data-path="line-plots.html"><a href="line-plots.html#d-paths"><i class="fa fa-check"></i><b>4.2.3</b> 3D paths</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="segments.html"><a href="segments.html"><i class="fa fa-check"></i><b>4.3</b> Segments</a></li>
<li class="chapter" data-level="4.4" data-path="ribbons.html"><a href="ribbons.html"><i class="fa fa-check"></i><b>4.4</b> Ribbons</a></li>
<li class="chapter" data-level="4.5" data-path="polygons.html"><a href="polygons.html"><i class="fa fa-check"></i><b>4.5</b> Polygons</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>5</b> Maps</a><ul>
<li class="chapter" data-level="5.1" data-path="using-scatter-traces.html"><a href="using-scatter-traces.html"><i class="fa fa-check"></i><b>5.1</b> Using scatter traces</a></li>
<li class="chapter" data-level="5.2" data-path="choropleths.html"><a href="choropleths.html"><i class="fa fa-check"></i><b>5.2</b> Choropleths</a></li>
<li class="chapter" data-level="5.3" data-path="using-geom-sf.html"><a href="using-geom-sf.html"><i class="fa fa-check"></i><b>5.3</b> Using <code>geom_sf()</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bars-histograms.html"><a href="bars-histograms.html"><i class="fa fa-check"></i><b>6</b> Bars &amp; histograms</a><ul>
<li class="chapter" data-level="6.1" data-path="multiple-numeric-distributions.html"><a href="multiple-numeric-distributions.html"><i class="fa fa-check"></i><b>6.1</b> Multiple numeric distributions</a></li>
<li class="chapter" data-level="6.2" data-path="multiple-discrete-distributions.html"><a href="multiple-discrete-distributions.html"><i class="fa fa-check"></i><b>6.2</b> Multiple discrete distributions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="boxplots.html"><a href="boxplots.html"><i class="fa fa-check"></i><b>7</b> Boxplots</a></li>
<li class="chapter" data-level="8" data-path="d-frequencies.html"><a href="d-frequencies.html"><i class="fa fa-check"></i><b>8</b> 2D frequencies</a><ul>
<li class="chapter" data-level="8.1" data-path="rectangular-binning-in-plotly-js.html"><a href="rectangular-binning-in-plotly-js.html"><i class="fa fa-check"></i><b>8.1</b> Rectangular binning in plotly.js</a></li>
<li class="chapter" data-level="8.2" data-path="rectangular-binning-in-r.html"><a href="rectangular-binning-in-r.html"><i class="fa fa-check"></i><b>8.2</b> Rectangular binning in R</a></li>
<li class="chapter" data-level="8.3" data-path="categorical-axes.html"><a href="categorical-axes.html"><i class="fa fa-check"></i><b>8.3</b> Categorical axes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="other-3d-plots.html"><a href="other-3d-plots.html"><i class="fa fa-check"></i><b>9</b> Other 3D plots</a></li>
<li class="chapter" data-level="10" data-path="raster-images.html"><a href="raster-images.html"><i class="fa fa-check"></i><b>10</b> Raster images</a></li>
<li class="part"><span><b>II Publishing views</b></span></li>
<li class="chapter" data-level="11" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>11</b> Introduction</a></li>
<li class="chapter" data-level="12" data-path="saving-and-embedding-html.html"><a href="saving-and-embedding-html.html"><i class="fa fa-check"></i><b>12</b> Saving and embedding HTML</a></li>
<li class="chapter" data-level="13" data-path="exporting-static-images.html"><a href="exporting-static-images.html"><i class="fa fa-check"></i><b>13</b> Exporting static images</a><ul>
<li class="chapter" data-level="13.1" data-path="with-code.html"><a href="with-code.html"><i class="fa fa-check"></i><b>13.1</b> With code</a></li>
<li class="chapter" data-level="13.2" data-path="from-a-browser.html"><a href="from-a-browser.html"><i class="fa fa-check"></i><b>13.2</b> From a browser</a></li>
<li class="chapter" data-level="13.3" data-path="sizing-exports.html"><a href="sizing-exports.html"><i class="fa fa-check"></i><b>13.3</b> Sizing exports</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="editing-views-for-publishing.html"><a href="editing-views-for-publishing.html"><i class="fa fa-check"></i><b>14</b> Editing views for publishing</a></li>
<li class="part"><span><b>III Combining multiple views</b></span></li>
<li class="chapter" data-level="15" data-path="arranging-views.html"><a href="arranging-views.html"><i class="fa fa-check"></i><b>15</b> Arranging views</a><ul>
<li class="chapter" data-level="15.1" data-path="arranging-htmlwidgets.html"><a href="arranging-htmlwidgets.html"><i class="fa fa-check"></i><b>15.1</b> Arranging htmlwidgets</a></li>
<li class="chapter" data-level="15.2" data-path="merging-plotly-objects.html"><a href="merging-plotly-objects.html"><i class="fa fa-check"></i><b>15.2</b> Merging plotly objects</a><ul>
<li class="chapter" data-level="15.2.1" data-path="merging-plotly-objects.html"><a href="merging-plotly-objects.html#recursive-subplots"><i class="fa fa-check"></i><b>15.2.1</b> Recursive subplots</a></li>
<li class="chapter" data-level="15.2.2" data-path="merging-plotly-objects.html"><a href="merging-plotly-objects.html#ggplot2-subplots"><i class="fa fa-check"></i><b>15.2.2</b> ggplot2 subplots</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="navigating-many-views.html"><a href="navigating-many-views.html"><i class="fa fa-check"></i><b>15.3</b> Navigating many views</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="animating-views.html"><a href="animating-views.html"><i class="fa fa-check"></i><b>16</b> Animating views</a></li>
<li class="part"><span><b>IV Linking multiple views</b></span></li>
<li class="chapter" data-level="17" data-path="client-side-linking.html"><a href="client-side-linking.html"><i class="fa fa-check"></i><b>17</b> Client-side linking</a><ul>
<li class="chapter" data-level="17.1" data-path="graphical-queries.html"><a href="graphical-queries.html"><i class="fa fa-check"></i><b>17.1</b> Graphical queries</a></li>
<li class="chapter" data-level="17.2" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>17.2</b> Highlight versus filter events</a></li>
<li class="chapter" data-level="17.3" data-path="linking-animated-views.html"><a href="linking-animated-views.html"><i class="fa fa-check"></i><b>17.3</b> Linking animated views</a></li>
<li class="chapter" data-level="17.4" data-path="querying-examples.html"><a href="querying-examples.html"><i class="fa fa-check"></i><b>17.4</b> Examples</a><ul>
<li class="chapter" data-level="17.4.1" data-path="querying-examples.html"><a href="querying-examples.html#trellis-linking"><i class="fa fa-check"></i><b>17.4.1</b> Querying facetted charts</a></li>
<li class="chapter" data-level="17.4.2" data-path="querying-examples.html"><a href="querying-examples.html#statistical-queries"><i class="fa fa-check"></i><b>17.4.2</b> Statistical queries</a></li>
<li class="chapter" data-level="17.4.3" data-path="querying-examples.html"><a href="querying-examples.html#statistical-queries-ggplot"><i class="fa fa-check"></i><b>17.4.3</b> Statistical queries with <code>ggplotly()</code></a></li>
<li class="chapter" data-level="17.4.4" data-path="querying-examples.html"><a href="querying-examples.html#geo-spatial-queries"><i class="fa fa-check"></i><b>17.4.4</b> Geo-spatial queries</a></li>
<li class="chapter" data-level="17.4.5" data-path="querying-examples.html"><a href="querying-examples.html#linking-with-other-htmlwidgets"><i class="fa fa-check"></i><b>17.4.5</b> Linking with other htmlwidgets</a></li>
<li class="chapter" data-level="17.4.6" data-path="querying-examples.html"><a href="querying-examples.html#generalized-pairs-plots"><i class="fa fa-check"></i><b>17.4.6</b> Generalized pairs plots</a></li>
<li class="chapter" data-level="17.4.7" data-path="querying-examples.html"><a href="querying-examples.html#querying-diagnostic-plots"><i class="fa fa-check"></i><b>17.4.7</b> Querying diagnostic plots</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="limitations.html"><a href="limitations.html"><i class="fa fa-check"></i><b>17.5</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="linking-server-side.html"><a href="linking-server-side.html"><i class="fa fa-check"></i><b>18</b> Server-side linking with shiny</a><ul>
<li class="chapter" data-level="18.1" data-path="hello-shiny.html"><a href="hello-shiny.html"><i class="fa fa-check"></i><b>18.1</b> Embedding plotly in shiny</a><ul>
<li class="chapter" data-level="18.1.1" data-path="hello-shiny.html"><a href="hello-shiny.html#your-first-shiny-app"><i class="fa fa-check"></i><b>18.1.1</b> Your first shiny app</a></li>
<li class="chapter" data-level="18.1.2" data-path="hello-shiny.html"><a href="hello-shiny.html#hiding-and-redrawing-on-resize"><i class="fa fa-check"></i><b>18.1.2</b> Hiding and redrawing on resize</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html"><i class="fa fa-check"></i><b>18.2</b> Leveraging plotly input events</a><ul>
<li class="chapter" data-level="18.2.1" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#dragging-events"><i class="fa fa-check"></i><b>18.2.1</b> Dragging events</a></li>
<li class="chapter" data-level="18.2.2" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#d-events"><i class="fa fa-check"></i><b>18.2.2</b> 3D events</a></li>
<li class="chapter" data-level="18.2.3" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#edit-events"><i class="fa fa-check"></i><b>18.2.3</b> Edit events</a></li>
<li class="chapter" data-level="18.2.4" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#relayout-vs-restyle-events"><i class="fa fa-check"></i><b>18.2.4</b> Relayout vs restyle events</a></li>
<li class="chapter" data-level="18.2.5" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#scoping-events"><i class="fa fa-check"></i><b>18.2.5</b> Scoping events</a></li>
<li class="chapter" data-level="18.2.6" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#event-priority"><i class="fa fa-check"></i><b>18.2.6</b> Event priority</a></li>
<li class="chapter" data-level="18.2.7" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#handling-discrete-axes"><i class="fa fa-check"></i><b>18.2.7</b> Handling discrete axes</a></li>
<li class="chapter" data-level="18.2.8" data-path="shiny-plotly-inputs.html"><a href="shiny-plotly-inputs.html#reactive-vals"><i class="fa fa-check"></i><b>18.2.8</b> Accumulating and managing event data</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="shiny-performance.html"><a href="shiny-performance.html"><i class="fa fa-check"></i><b>18.3</b> Improving performance</a><ul>
<li class="chapter" data-level="18.3.1" data-path="shiny-performance.html"><a href="shiny-performance.html#proxies"><i class="fa fa-check"></i><b>18.3.1</b> Partial plotly updates</a></li>
<li class="chapter" data-level="18.3.2" data-path="shiny-performance.html"><a href="shiny-performance.html#partial-update-examples"><i class="fa fa-check"></i><b>18.3.2</b> Partial update examples</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="advanced-applications.html"><a href="advanced-applications.html"><i class="fa fa-check"></i><b>18.4</b> Advanced applications</a><ul>
<li class="chapter" data-level="18.4.1" data-path="advanced-applications.html"><a href="advanced-applications.html#drill-down"><i class="fa fa-check"></i><b>18.4.1</b> Drill-down</a></li>
<li class="chapter" data-level="18.4.2" data-path="advanced-applications.html"><a href="advanced-applications.html#crossfilter"><i class="fa fa-check"></i><b>18.4.2</b> Cross-filter</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>18.5</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="javascript.html"><a href="javascript.html"><i class="fa fa-check"></i><b>19</b> Extending plotly with JavaScript</a><ul>
<li class="chapter" data-level="19.1" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>19.1</b> Working with JSON</a><ul>
<li class="chapter" data-level="19.1.1" data-path="json.html"><a href="json.html#assignment-subsetting-and-iteration"><i class="fa fa-check"></i><b>19.1.1</b> Assignment, subsetting, and iteration</a></li>
<li class="chapter" data-level="19.1.2" data-path="json.html"><a href="json.html#mapping-r-to-json"><i class="fa fa-check"></i><b>19.1.2</b> Mapping R to JSON</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="js-event-handlers.html"><a href="js-event-handlers.html"><i class="fa fa-check"></i><b>19.2</b> Adding custom event handlers</a></li>
<li class="chapter" data-level="19.3" data-path="supplying-custom-data.html"><a href="supplying-custom-data.html"><i class="fa fa-check"></i><b>19.3</b> Supplying custom data</a></li>
<li class="chapter" data-level="19.4" data-path="incorporating-other-client-side-tools.html"><a href="incorporating-other-client-side-tools.html"><i class="fa fa-check"></i><b>19.4</b> Incorporating other client-side tools</a></li>
</ul></li>
<li class="part"><span><b>V Various special topics</b></span></li>
<li class="chapter" data-level="20" data-path="is-plotly-free.html"><a href="is-plotly-free.html"><i class="fa fa-check"></i><b>20</b> Is plotly free?</a></li>
<li class="chapter" data-level="21" data-path="when-does-data-remain-local.html"><a href="when-does-data-remain-local.html"><i class="fa fa-check"></i><b>21</b> When does data remain local?</a></li>
<li class="chapter" data-level="22" data-path="language-support.html"><a href="language-support.html"><i class="fa fa-check"></i><b>22</b> Language support</a></li>
<li class="chapter" data-level="23" data-path="latex-rendering.html"><a href="latex-rendering.html"><i class="fa fa-check"></i><b>23</b> LaTeX rendering</a><ul>
<li class="chapter" data-level="23.1" data-path="mathjax-caveats.html"><a href="mathjax-caveats.html"><i class="fa fa-check"></i><b>23.1</b> MathJax caveats</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="control-tooltip-text.html"><a href="control-tooltip-text.html"><i class="fa fa-check"></i><b>24</b> Control tooltip text</a></li>
<li class="chapter" data-level="25" data-path="control-ggplotly-tooltips.html"><a href="control-ggplotly-tooltips.html"><i class="fa fa-check"></i><b>25</b> Control <code>ggplotly()</code> tooltips</a></li>
<li class="chapter" data-level="26" data-path="control-tooltip-styling.html"><a href="control-tooltip-styling.html"><i class="fa fa-check"></i><b>26</b> Control tooltip styling</a></li>
<li class="chapter" data-level="27" data-path="control-the-modebar.html"><a href="control-the-modebar.html"><i class="fa fa-check"></i><b>27</b> Control the modebar</a><ul>
<li class="chapter" data-level="27.1" data-path="remove-the-entire-modebar.html"><a href="remove-the-entire-modebar.html"><i class="fa fa-check"></i><b>27.1</b> Remove the entire modebar</a></li>
<li class="chapter" data-level="27.2" data-path="remove-the-plotly-logo.html"><a href="remove-the-plotly-logo.html"><i class="fa fa-check"></i><b>27.2</b> Remove the plotly logo</a></li>
<li class="chapter" data-level="27.3" data-path="remove-modebar-buttons.html"><a href="remove-modebar-buttons.html"><i class="fa fa-check"></i><b>27.3</b> Remove modebar buttons</a></li>
<li class="chapter" data-level="27.4" data-path="add-custom-modebar-buttons.html"><a href="add-custom-modebar-buttons.html"><i class="fa fa-check"></i><b>27.4</b> Add custom modebar buttons</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="facetted-subplot.html"><a href="facetted-subplot.html"><i class="fa fa-check"></i><b>28</b> Facetted <code>subplot()</code></a></li>
<li class="chapter" data-level="29" data-path="control-plot-margins.html"><a href="control-plot-margins.html"><i class="fa fa-check"></i><b>29</b> Control plot margin(s)</a></li>
<li class="chapter" data-level="30" data-path="control-axes.html"><a href="control-axes.html"><i class="fa fa-check"></i><b>30</b> Control axes</a></li>
<li class="chapter" data-level="31" data-path="why-does-my-line-plot-appear-blank-i-e-malformed-group-definition.html"><a href="why-does-my-line-plot-appear-blank-i-e-malformed-group-definition.html"><i class="fa fa-check"></i><b>31</b> Why does my line plot appear blank (i.e., malformed group definition)?</a></li>
<li class="chapter" data-level="32" data-path="improving-performance.html"><a href="improving-performance.html"><i class="fa fa-check"></i><b>32</b> Improving performance</a></li>
<li class="chapter" data-level="33" data-path="r-file-size-so-big.html"><a href="r-file-size-so-big.html"><i class="fa fa-check"></i><b>33</b> R file size so big?</a></li>
<li class="chapter" data-level="34" data-path="how-to-prevent-plotly-from-graying-out-in-shiny.html"><a href="how-to-prevent-plotly-from-graying-out-in-shiny.html"><i class="fa fa-check"></i><b>34</b> How to prevent plotly from graying-out in shiny?</a></li>
<li class="chapter" data-level="35" data-path="why-am-i-getting-a-blank-plot.html"><a href="why-am-i-getting-a-blank-plot.html"><i class="fa fa-check"></i><b>35</b> Why am I getting a blank plot?</a></li>
<li class="chapter" data-level="36" data-path="learn-how-to-fish-plotly-js.html"><a href="learn-how-to-fish-plotly-js.html"><i class="fa fa-check"></i><b>36</b> Learn how to fish (plotly.js)</a></li>
<li class="chapter" data-level="37" data-path="how-can-i-report-a-bug.html"><a href="how-can-i-report-a-bug.html"><i class="fa fa-check"></i><b>37</b> How can I report a bug?</a></li>
<li class="chapter" data-level="38" data-path="what-advantages-does-plotlyshiny-have-over-dash.html"><a href="what-advantages-does-plotlyshiny-have-over-dash.html"><i class="fa fa-check"></i><b>38</b> What advantages does plotly+shiny have over dash?</a></li>
<li class="chapter" data-level="39" data-path="developer-facing-topics.html"><a href="developer-facing-topics.html"><i class="fa fa-check"></i><b>39</b> Developer-facing topics</a><ul>
<li class="chapter" data-level="39.1" data-path="translating-custom-ggplot2-geoms.html"><a href="translating-custom-ggplot2-geoms.html"><i class="fa fa-check"></i><b>39.1</b> Translating custom ggplot2 geoms</a></li>
<li class="chapter" data-level="39.2" data-path="designing-an-htmlwidget-interface.html"><a href="designing-an-htmlwidget-interface.html"><i class="fa fa-check"></i><b>39.2</b> Designing an htmlwidget interface</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Interactive web-based data visualization with R, plotly, and shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ribbons" class="section level2">
<h2><span class="header-section-number">4.4</span> Ribbons</h2>
<p>Ribbons are useful for showing uncertainty bounds as a function of x. The <code>add_ribbons()</code> function creates ribbons and requires the arguments: <code>x</code>, <code>ymin</code>, and <code>ymax</code>. The <code>augment()</code> function from the <strong>broom</strong> package appends observational-level model components (e.g., fitted values stored as a new column <code>.fitted</code>) which is useful for extracting those components in a convenient form for visualization. Figure <a href="ribbons.html#fig:broom-lm">4.18</a> shows the fitted values and uncertainty bounds from a linear model object.</p>
<pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> mtcars)
broom<span class="op">::</span><span class="kw">augment</span>(m) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">plot_ly</span>(<span class="dt">x =</span> <span class="op">~</span>wt, <span class="dt">showlegend =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_markers</span>(<span class="dt">y =</span> <span class="op">~</span>mpg, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;black&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_ribbons</span>(<span class="dt">ymin =</span> <span class="op">~</span>.fitted <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>.se.fit, 
              <span class="dt">ymax =</span> <span class="op">~</span>.fitted <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>.se.fit, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;gray80&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_lines</span>(<span class="dt">y =</span> <span class="op">~</span>.fitted, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;steelblue&quot;</span>))</code></pre>
<div class="figure"><span id="fig:broom-lm"></span>
<div id="htmlwidget-f37a0df1004f84a0b575" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f37a0df1004f84a0b575">{"x":{"visdat":{"31b9e1537dc":["function () ","plotlyVisDat"]},"cur_data":"31b9e1537dc","attrs":{"31b9e1537dc":{"x":{},"showlegend":false,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":["black"],"inherit":true},"31b9e1537dc.1":{"x":{},"showlegend":false,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"ymin":{},"ymax":{},"type":"scatter","mode":"lines","hoveron":"points","fill":"toself","color":["gray80"],"inherit":true},"31b9e1537dc.2":{"x":{},"showlegend":false,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines","color":["steelblue"],"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"wt"},"yaxis":{"domain":[0,1],"automargin":true,"title":"mpg"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],"showlegend":false,"y":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],"type":"scatter","mode":"markers","marker":{"color":"rgba(0,0,0,1)","line":{"color":"rgba(0,0,0,1)"}},"textfont":{"color":"rgba(0,0,0,1)"},"error_y":{"color":"rgba(0,0,0,1)"},"error_x":{"color":"rgba(0,0,0,1)"},"line":{"color":"rgba(0,0,0,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"rgba(204,204,204,0.5)","x":[1.513,1.615,1.835,1.935,2.14,2.2,2.32,2.465,2.62,2.77,2.78,2.875,3.15,3.17,3.19,3.215,3.435,3.44,3.44,3.44,3.46,3.52,3.57,3.57,3.73,3.78,3.84,3.845,4.07,5.25,5.345,5.424,5.424,5.424,5.345,5.25,4.07,3.845,3.84,3.78,3.73,3.57,3.57,3.52,3.46,3.44,3.44,3.44,3.435,3.215,3.19,3.17,3.15,2.875,2.78,2.77,2.62,2.465,2.32,2.2,2.14,1.935,1.835,1.615,1.513],"showlegend":false,"type":"scatter","mode":"lines","hoveron":"points","fill":"toself","y":[27.0538033571977,26.6052421225734,25.6319074034813,25.1862560113963,24.2645076370395,23.992231807734,23.4435534662337,22.7718641161117,22.0407943035522,21.3173407837226,21.2684691760634,20.7997638995001,19.3921264496678,19.2865375314895,19.1804951458066,19.0473028672544,17.844881786139,17.8169378746621,17.8169378746621,17.8169378746621,17.7049000644504,17.3663224224838,17.0814508078569,17.0814508078569,16.1546414674817,15.8607104988908,15.5055870053761,15.4758810102927,14.1235181192817,6.76173732353613,6.15954407533638,5.65822049905983,5.65822049905983,10.9352042147286,11.2783071469423,11.6915634975598,16.9427356134398,17.9953849301539,18.0191236507978,18.3053367460098,18.5458529346912,19.3292744975872,19.3292744975872,19.5788500402326,19.8816089869927,19.98335003969,19.98335003969,19.98335003969,20.0088508439403,21.1579972548228,21.2920285549068,21.3997650321328,21.5079549768634,23.0397768920286,23.5865212142826,23.6445390380778,24.524426990065,25.4501433650496,26.3283507710171,27.0623456069702,27.4314063663915,28.700891336851,29.3241342593105,30.7023670322164,31.3440779984275],"marker":{"color":"rgba(204,204,204,1)","line":{"color":"rgba(204,204,204,1)"}},"textfont":{"color":"rgba(204,204,204,1)"},"error_y":{"color":"rgba(204,204,204,1)"},"error_x":{"color":"rgba(204,204,204,1)"},"line":{"color":"rgba(204,204,204,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1.513,1.615,1.835,1.935,2.14,2.2,2.32,2.465,2.62,2.77,2.78,2.875,3.15,3.17,3.19,3.215,3.435,3.44,3.44,3.44,3.46,3.52,3.57,3.57,3.73,3.78,3.84,3.845,4.07,5.25,5.345,5.424],"showlegend":false,"y":[29.1989406778126,28.6538045773949,27.4780208313959,26.9435736741236,25.8479570017155,25.5272887073521,24.8859521186254,24.1110037405806,23.2826106468086,22.4809399109002,22.427495195173,21.9197703957643,20.4500407132656,20.3431512818111,20.2362618503567,20.1026500610386,18.9268663150396,18.900143957176,18.900143957176,18.900143957176,18.7932545257216,18.4725862313582,18.2053626527221,18.2053626527221,17.3502472010864,17.0830236224503,16.7623553280869,16.7356329702233,15.5331268663607,9.22665041054798,8.71892561113932,8.29671235689423],"type":"scatter","mode":"lines","marker":{"color":"rgba(70,130,180,1)","line":{"color":"rgba(70,130,180,1)"}},"textfont":{"color":"rgba(70,130,180,1)"},"error_y":{"color":"rgba(70,130,180,1)"},"error_x":{"color":"rgba(70,130,180,1)"},"line":{"color":"rgba(70,130,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p class="caption">
FIGURE 4.18: Plotting fitted values and uncertainty bounds of a linear model via the <strong>broom</strong> package.
</p>
</div>
</div>
<script>
  var header = document.querySelector(".book-header h1");

  var img = document.createElement("img");
  img.src = "images/rstudioCloud.svg";
  img.width = 200;
  img.align = "right";
  img.style = "margin-top: 10px";

  var a = document.createElement("a");
  a.href = "https://rstudio.cloud/project/156701";
  a.target = "_blank";
  a.appendChild(img);

  header.appendChild(a);
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-60116966-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-60116966-3');
</script>
            </section>

          </div>
        </div>
      </div>
<a href="segments.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="polygons.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cpsievert/plotly_book/edit/master/plotly-cookbook.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
