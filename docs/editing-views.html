<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>13 Editing views for publishing | Interactive web-based data visualization with R, plotly, and shiny</title>
  <meta name="description" content="A book example for a Chapman &amp; Hall book.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="13 Editing views for publishing | Interactive web-based data visualization with R, plotly, and shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book example for a Chapman &amp; Hall book." />
  <meta name="github-repo" content="ropensci/plotly" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="13 Editing views for publishing | Interactive web-based data visualization with R, plotly, and shiny" />
  <meta name="twitter:site" content="@cpsievert" />
  <meta name="twitter:description" content="A book example for a Chapman &amp; Hall book." />
  

<meta name="author" content="Carson Sievert">


<meta name="date" content="2019-03-09">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="exporting-static-images.html">
<link rel="next" href="arranging-views.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<link href="libs/colourpicker/colourpicker.min.css" rel="stylesheet" />
<script src="libs/colourpicker/colourpicker.min.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/plotly.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/summary-fix.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-you-will-learn"><i class="fa fa-check"></i><b>1.1</b> What you will learn</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#how-this-book-is-organized"><i class="fa fa-check"></i><b>1.2</b> How this book is organized</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-you-wont-learn"><i class="fa fa-check"></i><b>1.3</b> What you won’t learn</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#web-technologies"><i class="fa fa-check"></i><b>1.3.1</b> Web technologies</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#d3js"><i class="fa fa-check"></i><b>1.3.2</b> d3js</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#ggplot2"><i class="fa fa-check"></i><b>1.3.3</b> ggplot2</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#graphical-data-analysis"><i class="fa fa-check"></i><b>1.3.4</b> Graphical data analysis</a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction.html"><a href="introduction.html#data-visualization-best-practices"><i class="fa fa-check"></i><b>1.3.5</b> Data visualization best practices</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i><b>1.4</b> Prerequisites</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#run-code-examples"><i class="fa fa-check"></i><b>1.5</b> Run code examples</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#getting-help-and-learning-more"><i class="fa fa-check"></i><b>1.6</b> Getting help and learning more</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>1.8</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="why-web-graphics.html"><a href="why-web-graphics.html"><i class="fa fa-check"></i><b>2</b> Why interactive web graphics in R?</a></li>
<li class="part"><span><b>I Creating views</b></span></li>
<li class="chapter" data-level="3" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>3</b> Overview</a><ul>
<li class="chapter" data-level="3.1" data-path="overview.html"><a href="overview.html#intro-plotly"><i class="fa fa-check"></i><b>3.1</b> Intro to <code>plot_ly()</code></a></li>
<li class="chapter" data-level="3.2" data-path="overview.html"><a href="overview.html#intro-plotly-js"><i class="fa fa-check"></i><b>3.2</b> Intro to plotly.js</a></li>
<li class="chapter" data-level="3.3" data-path="overview.html"><a href="overview.html#intro-to-ggplotly"><i class="fa fa-check"></i><b>3.3</b> Intro to <code>ggplotly()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="scatter-traces.html"><a href="scatter-traces.html"><i class="fa fa-check"></i><b>4</b> Scattered foundations</a><ul>
<li class="chapter" data-level="4.1" data-path="scatter-traces.html"><a href="scatter-traces.html#markers"><i class="fa fa-check"></i><b>4.1</b> Markers</a><ul>
<li class="chapter" data-level="4.1.1" data-path="scatter-traces.html"><a href="scatter-traces.html#marker-alpha"><i class="fa fa-check"></i><b>4.1.1</b> Alpha blending</a></li>
<li class="chapter" data-level="4.1.2" data-path="scatter-traces.html"><a href="scatter-traces.html#marker-color"><i class="fa fa-check"></i><b>4.1.2</b> Colors</a></li>
<li class="chapter" data-level="4.1.3" data-path="scatter-traces.html"><a href="scatter-traces.html#marker-symbol"><i class="fa fa-check"></i><b>4.1.3</b> Symbols</a></li>
<li class="chapter" data-level="4.1.4" data-path="scatter-traces.html"><a href="scatter-traces.html#marker-stroke"><i class="fa fa-check"></i><b>4.1.4</b> Stroke and span</a></li>
<li class="chapter" data-level="4.1.5" data-path="scatter-traces.html"><a href="scatter-traces.html#marker-size"><i class="fa fa-check"></i><b>4.1.5</b> Size</a></li>
<li class="chapter" data-level="4.1.6" data-path="scatter-traces.html"><a href="scatter-traces.html#dot-plots"><i class="fa fa-check"></i><b>4.1.6</b> Dotplots &amp; error bars</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="scatter-traces.html"><a href="scatter-traces.html#lines"><i class="fa fa-check"></i><b>4.2</b> Lines</a><ul>
<li class="chapter" data-level="4.2.1" data-path="scatter-traces.html"><a href="scatter-traces.html#linetypes"><i class="fa fa-check"></i><b>4.2.1</b> Linetypes</a></li>
<li class="chapter" data-level="4.2.2" data-path="scatter-traces.html"><a href="scatter-traces.html#segments"><i class="fa fa-check"></i><b>4.2.2</b> Segments</a></li>
<li class="chapter" data-level="4.2.3" data-path="scatter-traces.html"><a href="scatter-traces.html#density-plots"><i class="fa fa-check"></i><b>4.2.3</b> Density plots</a></li>
<li class="chapter" data-level="4.2.4" data-path="scatter-traces.html"><a href="scatter-traces.html#parallel-coordinates"><i class="fa fa-check"></i><b>4.2.4</b> Parallel Coordinates</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="scatter-traces.html"><a href="scatter-traces.html#polygons"><i class="fa fa-check"></i><b>4.3</b> Polygons</a><ul>
<li class="chapter" data-level="4.3.1" data-path="scatter-traces.html"><a href="scatter-traces.html#ribbons"><i class="fa fa-check"></i><b>4.3.1</b> Ribbons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>5</b> Maps</a><ul>
<li class="chapter" data-level="5.1" data-path="maps.html"><a href="maps.html#maps-integrated"><i class="fa fa-check"></i><b>5.1</b> Integrated maps</a><ul>
<li class="chapter" data-level="5.1.1" data-path="maps.html"><a href="maps.html#overview-1"><i class="fa fa-check"></i><b>5.1.1</b> Overview</a></li>
<li class="chapter" data-level="5.1.2" data-path="maps.html"><a href="maps.html#choropleths"><i class="fa fa-check"></i><b>5.1.2</b> Choropleths</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="maps.html"><a href="maps.html#maps-custom"><i class="fa fa-check"></i><b>5.2</b> Custom maps</a><ul>
<li class="chapter" data-level="5.2.1" data-path="maps.html"><a href="maps.html#sf"><i class="fa fa-check"></i><b>5.2.1</b> Simple features (sf)</a></li>
<li class="chapter" data-level="5.2.2" data-path="maps.html"><a href="maps.html#cartograms"><i class="fa fa-check"></i><b>5.2.2</b> Cartograms</a></li>
<li class="chapter" data-level="5.2.3" data-path="maps.html"><a href="maps.html#geo-faceting"><i class="fa fa-check"></i><b>5.2.3</b> Geo faceting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bars-histograms.html"><a href="bars-histograms.html"><i class="fa fa-check"></i><b>6</b> Bars &amp; histograms</a><ul>
<li class="chapter" data-level="6.1" data-path="bars-histograms.html"><a href="bars-histograms.html#multiple-numeric-distributions"><i class="fa fa-check"></i><b>6.1</b> Multiple numeric distributions</a></li>
<li class="chapter" data-level="6.2" data-path="bars-histograms.html"><a href="bars-histograms.html#multiple-discrete-distributions"><i class="fa fa-check"></i><b>6.2</b> Multiple discrete distributions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="boxplots.html"><a href="boxplots.html"><i class="fa fa-check"></i><b>7</b> Boxplots</a></li>
<li class="chapter" data-level="8" data-path="frequencies-2D.html"><a href="frequencies-2D.html"><i class="fa fa-check"></i><b>8</b> 2D frequencies</a><ul>
<li class="chapter" data-level="8.1" data-path="frequencies-2D.html"><a href="frequencies-2D.html#rectangular-binning-in-plotly.js"><i class="fa fa-check"></i><b>8.1</b> Rectangular binning in plotly.js</a></li>
<li class="chapter" data-level="8.2" data-path="frequencies-2D.html"><a href="frequencies-2D.html#rectangular-binning-in-r"><i class="fa fa-check"></i><b>8.2</b> Rectangular binning in R</a></li>
<li class="chapter" data-level="8.3" data-path="frequencies-2D.html"><a href="frequencies-2D.html#categorical-axes"><i class="fa fa-check"></i><b>8.3</b> Categorical axes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="d-charts.html"><a href="d-charts.html"><i class="fa fa-check"></i><b>9</b> 3D charts</a><ul>
<li class="chapter" data-level="9.0.1" data-path="d-charts.html"><a href="d-charts.html#markers-and-lines"><i class="fa fa-check"></i><b>9.0.1</b> Markers and lines</a></li>
<li class="chapter" data-level="9.0.2" data-path="d-charts.html"><a href="d-charts.html#d-paths"><i class="fa fa-check"></i><b>9.0.2</b> 3D paths</a></li>
</ul></li>
<li class="part"><span><b>II Publishing views</b></span></li>
<li class="chapter" data-level="10" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>10</b> Introduction</a></li>
<li class="chapter" data-level="11" data-path="saving-and-embedding-html.html"><a href="saving-and-embedding-html.html"><i class="fa fa-check"></i><b>11</b> Saving and embedding HTML</a></li>
<li class="chapter" data-level="12" data-path="exporting-static-images.html"><a href="exporting-static-images.html"><i class="fa fa-check"></i><b>12</b> Exporting static images</a><ul>
<li class="chapter" data-level="12.1" data-path="exporting-static-images.html"><a href="exporting-static-images.html#with-code"><i class="fa fa-check"></i><b>12.1</b> With code</a></li>
<li class="chapter" data-level="12.2" data-path="exporting-static-images.html"><a href="exporting-static-images.html#from-a-browser"><i class="fa fa-check"></i><b>12.2</b> From a browser</a></li>
<li class="chapter" data-level="12.3" data-path="exporting-static-images.html"><a href="exporting-static-images.html#sizing-exports"><i class="fa fa-check"></i><b>12.3</b> Sizing exports</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="editing-views.html"><a href="editing-views.html"><i class="fa fa-check"></i><b>13</b> Editing views for publishing</a></li>
<li class="part"><span><b>III Combining multiple views</b></span></li>
<li class="chapter" data-level="14" data-path="arranging-views.html"><a href="arranging-views.html"><i class="fa fa-check"></i><b>14</b> Arranging views</a><ul>
<li class="chapter" data-level="14.1" data-path="arranging-views.html"><a href="arranging-views.html#arranging-htmlwidgets"><i class="fa fa-check"></i><b>14.1</b> Arranging htmlwidgets</a></li>
<li class="chapter" data-level="14.2" data-path="arranging-views.html"><a href="arranging-views.html#merging-plotly-objects"><i class="fa fa-check"></i><b>14.2</b> Merging plotly objects</a><ul>
<li class="chapter" data-level="14.2.1" data-path="arranging-views.html"><a href="arranging-views.html#recursive-subplots"><i class="fa fa-check"></i><b>14.2.1</b> Recursive subplots</a></li>
<li class="chapter" data-level="14.2.2" data-path="arranging-views.html"><a href="arranging-views.html#ggplot2-subplots"><i class="fa fa-check"></i><b>14.2.2</b> ggplot2 subplots</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="arranging-views.html"><a href="arranging-views.html#creating-facets-with-subplot"><i class="fa fa-check"></i><b>14.3</b> Creating facets with <code>subplot()</code></a></li>
<li class="chapter" data-level="14.4" data-path="arranging-views.html"><a href="arranging-views.html#scatterplot-matrices-with-ggally"><i class="fa fa-check"></i><b>14.4</b> Scatterplot matrices with GGally</a></li>
<li class="chapter" data-level="14.5" data-path="arranging-views.html"><a href="arranging-views.html#navigating-many-views"><i class="fa fa-check"></i><b>14.5</b> Navigating many views</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="animating-views.html"><a href="animating-views.html"><i class="fa fa-check"></i><b>15</b> Animating views</a><ul>
<li class="chapter" data-level="15.1" data-path="animating-views.html"><a href="animating-views.html#animation-api"><i class="fa fa-check"></i><b>15.1</b> Animation API</a></li>
<li class="chapter" data-level="15.2" data-path="animating-views.html"><a href="animating-views.html#animation-support"><i class="fa fa-check"></i><b>15.2</b> Animation support</a></li>
</ul></li>
<li class="part"><span><b>IV Linking multiple views</b></span></li>
<li class="chapter" data-level="16" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>16</b> Introduction</a></li>
<li class="chapter" data-level="17" data-path="client-side-linking.html"><a href="client-side-linking.html"><i class="fa fa-check"></i><b>17</b> Client-side linking</a><ul>
<li class="chapter" data-level="17.1" data-path="client-side-linking.html"><a href="client-side-linking.html#graphical-queries"><i class="fa fa-check"></i><b>17.1</b> Graphical queries</a></li>
<li class="chapter" data-level="17.2" data-path="client-side-linking.html"><a href="client-side-linking.html#filter"><i class="fa fa-check"></i><b>17.2</b> Highlight versus filter events</a></li>
<li class="chapter" data-level="17.3" data-path="client-side-linking.html"><a href="client-side-linking.html#linking-animated-views"><i class="fa fa-check"></i><b>17.3</b> Linking animated views</a></li>
<li class="chapter" data-level="17.4" data-path="client-side-linking.html"><a href="client-side-linking.html#querying-examples"><i class="fa fa-check"></i><b>17.4</b> Examples</a><ul>
<li class="chapter" data-level="17.4.1" data-path="client-side-linking.html"><a href="client-side-linking.html#trellis-linking"><i class="fa fa-check"></i><b>17.4.1</b> Querying facetted charts</a></li>
<li class="chapter" data-level="17.4.2" data-path="client-side-linking.html"><a href="client-side-linking.html#statistical-queries"><i class="fa fa-check"></i><b>17.4.2</b> Statistical queries</a></li>
<li class="chapter" data-level="17.4.3" data-path="client-side-linking.html"><a href="client-side-linking.html#statistical-queries-ggplot"><i class="fa fa-check"></i><b>17.4.3</b> Statistical queries with <code>ggplotly()</code></a></li>
<li class="chapter" data-level="17.4.4" data-path="client-side-linking.html"><a href="client-side-linking.html#geo-spatial-queries"><i class="fa fa-check"></i><b>17.4.4</b> Geo-spatial queries</a></li>
<li class="chapter" data-level="17.4.5" data-path="client-side-linking.html"><a href="client-side-linking.html#linking-with-other-htmlwidgets"><i class="fa fa-check"></i><b>17.4.5</b> Linking with other htmlwidgets</a></li>
<li class="chapter" data-level="17.4.6" data-path="client-side-linking.html"><a href="client-side-linking.html#ggally-ggpairs"><i class="fa fa-check"></i><b>17.4.6</b> Generalized pairs plots</a></li>
<li class="chapter" data-level="17.4.7" data-path="client-side-linking.html"><a href="client-side-linking.html#ggally-ggnostic"><i class="fa fa-check"></i><b>17.4.7</b> Querying diagnostic plots</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="client-side-linking.html"><a href="client-side-linking.html#limitations"><i class="fa fa-check"></i><b>17.5</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="linking-server-side.html"><a href="linking-server-side.html"><i class="fa fa-check"></i><b>18</b> Server-side linking with shiny</a><ul>
<li class="chapter" data-level="18.1" data-path="linking-server-side.html"><a href="linking-server-side.html#hello-shiny"><i class="fa fa-check"></i><b>18.1</b> Embedding plotly in shiny</a><ul>
<li class="chapter" data-level="18.1.1" data-path="linking-server-side.html"><a href="linking-server-side.html#your-first-shiny-app"><i class="fa fa-check"></i><b>18.1.1</b> Your first shiny app</a></li>
<li class="chapter" data-level="18.1.2" data-path="linking-server-side.html"><a href="linking-server-side.html#hiding-and-redrawing-on-resize"><i class="fa fa-check"></i><b>18.1.2</b> Hiding and redrawing on resize</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="linking-server-side.html"><a href="linking-server-side.html#shiny-plotly-inputs"><i class="fa fa-check"></i><b>18.2</b> Leveraging plotly input events</a><ul>
<li class="chapter" data-level="18.2.1" data-path="linking-server-side.html"><a href="linking-server-side.html#dragging-events"><i class="fa fa-check"></i><b>18.2.1</b> Dragging events</a></li>
<li class="chapter" data-level="18.2.2" data-path="linking-server-side.html"><a href="linking-server-side.html#d-events"><i class="fa fa-check"></i><b>18.2.2</b> 3D events</a></li>
<li class="chapter" data-level="18.2.3" data-path="linking-server-side.html"><a href="linking-server-side.html#edit-events"><i class="fa fa-check"></i><b>18.2.3</b> Edit events</a></li>
<li class="chapter" data-level="18.2.4" data-path="linking-server-side.html"><a href="linking-server-side.html#relayout-vs-restyle-events"><i class="fa fa-check"></i><b>18.2.4</b> Relayout vs restyle events</a></li>
<li class="chapter" data-level="18.2.5" data-path="linking-server-side.html"><a href="linking-server-side.html#scoping-events"><i class="fa fa-check"></i><b>18.2.5</b> Scoping events</a></li>
<li class="chapter" data-level="18.2.6" data-path="linking-server-side.html"><a href="linking-server-side.html#event-priority"><i class="fa fa-check"></i><b>18.2.6</b> Event priority</a></li>
<li class="chapter" data-level="18.2.7" data-path="linking-server-side.html"><a href="linking-server-side.html#handling-discrete-axes"><i class="fa fa-check"></i><b>18.2.7</b> Handling discrete axes</a></li>
<li class="chapter" data-level="18.2.8" data-path="linking-server-side.html"><a href="linking-server-side.html#reactive-vals"><i class="fa fa-check"></i><b>18.2.8</b> Accumulating and managing event data</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="linking-server-side.html"><a href="linking-server-side.html#shiny-performance"><i class="fa fa-check"></i><b>18.3</b> Improving performance</a><ul>
<li class="chapter" data-level="18.3.1" data-path="linking-server-side.html"><a href="linking-server-side.html#proxies"><i class="fa fa-check"></i><b>18.3.1</b> Partial plotly updates</a></li>
<li class="chapter" data-level="18.3.2" data-path="linking-server-side.html"><a href="linking-server-side.html#partial-update-examples"><i class="fa fa-check"></i><b>18.3.2</b> Partial update examples</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="linking-server-side.html"><a href="linking-server-side.html#advanced-applications"><i class="fa fa-check"></i><b>18.4</b> Advanced applications</a><ul>
<li class="chapter" data-level="18.4.1" data-path="linking-server-side.html"><a href="linking-server-side.html#drill-down"><i class="fa fa-check"></i><b>18.4.1</b> Drill-down</a></li>
<li class="chapter" data-level="18.4.2" data-path="linking-server-side.html"><a href="linking-server-side.html#crossfilter"><i class="fa fa-check"></i><b>18.4.2</b> Cross-filter</a></li>
<li class="chapter" data-level="18.4.3" data-path="linking-server-side.html"><a href="linking-server-side.html#drag-brush"><i class="fa fa-check"></i><b>18.4.3</b> A draggable brush</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="linking-server-side.html"><a href="linking-server-side.html#discussion"><i class="fa fa-check"></i><b>18.5</b> Discussion</a></li>
</ul></li>
<li class="part"><span><b>V Scaling views</b></span></li>
<li class="chapter" data-level="19" data-path="scaling.html"><a href="scaling.html"><i class="fa fa-check"></i><b>19</b> Introduction</a></li>
<li class="chapter" data-level="20" data-path="run-time-efficiency.html"><a href="run-time-efficiency.html"><i class="fa fa-check"></i><b>20</b> Run-time efficiency</a></li>
<li class="chapter" data-level="21" data-path="print-time-efficiency.html"><a href="print-time-efficiency.html"><i class="fa fa-check"></i><b>21</b> Print-time efficiency</a></li>
<li class="chapter" data-level="22" data-path="a-case-study-with-cranlogs.html"><a href="a-case-study-with-cranlogs.html"><i class="fa fa-check"></i><b>22</b> A case study with cranlogs</a></li>
<li class="part"><span><b>VI Custom behavior with JavaScript</b></span></li>
<li class="chapter" data-level="23" data-path="javascript.html"><a href="javascript.html"><i class="fa fa-check"></i><b>23</b> Introduction</a></li>
<li class="chapter" data-level="24" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>24</b> Working with JSON</a><ul>
<li class="chapter" data-level="24.1" data-path="json.html"><a href="json.html#assignment-subsetting-and-iteration"><i class="fa fa-check"></i><b>24.1</b> Assignment, subsetting, and iteration</a></li>
<li class="chapter" data-level="24.2" data-path="json.html"><a href="json.html#mapping-r-to-json"><i class="fa fa-check"></i><b>24.2</b> Mapping R to JSON</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="js-event-handlers.html"><a href="js-event-handlers.html"><i class="fa fa-check"></i><b>25</b> Adding custom event handlers</a></li>
<li class="chapter" data-level="26" data-path="supplying-custom-data.html"><a href="supplying-custom-data.html"><i class="fa fa-check"></i><b>26</b> Supplying custom data</a></li>
<li class="chapter" data-level="27" data-path="client-side.html"><a href="client-side.html"><i class="fa fa-check"></i><b>27</b> Leveraging web technologies from R</a></li>
<li class="part"><span><b>VII Various special topics</b></span></li>
<li class="chapter" data-level="28" data-path="is-plotly-free-secure.html"><a href="is-plotly-free-secure.html"><i class="fa fa-check"></i><b>28</b> Is plotly free &amp; secure?</a></li>
<li class="chapter" data-level="29" data-path="controlling-tooltips.html"><a href="controlling-tooltips.html"><i class="fa fa-check"></i><b>29</b> Controlling tooltips</a><ul>
<li class="chapter" data-level="29.1" data-path="controlling-tooltips.html"><a href="controlling-tooltips.html#tooltip-text"><i class="fa fa-check"></i><b>29.1</b> <code>plot_ly()</code> tooltips</a></li>
<li class="chapter" data-level="29.2" data-path="controlling-tooltips.html"><a href="controlling-tooltips.html#tooltip-text-ggplotly"><i class="fa fa-check"></i><b>29.2</b> <code>ggplotly()</code> tooltips</a></li>
<li class="chapter" data-level="29.3" data-path="controlling-tooltips.html"><a href="controlling-tooltips.html#styling"><i class="fa fa-check"></i><b>29.3</b> Styling</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="control-the-modebar.html"><a href="control-the-modebar.html"><i class="fa fa-check"></i><b>30</b> Control the modebar</a><ul>
<li class="chapter" data-level="30.1" data-path="control-the-modebar.html"><a href="control-the-modebar.html#remove-the-entire-modebar"><i class="fa fa-check"></i><b>30.1</b> Remove the entire modebar</a></li>
<li class="chapter" data-level="30.2" data-path="control-the-modebar.html"><a href="control-the-modebar.html#remove-the-plotly-logo"><i class="fa fa-check"></i><b>30.2</b> Remove the plotly logo</a></li>
<li class="chapter" data-level="30.3" data-path="control-the-modebar.html"><a href="control-the-modebar.html#remove-modebar-buttons-by-name"><i class="fa fa-check"></i><b>30.3</b> Remove modebar buttons by name</a></li>
<li class="chapter" data-level="30.4" data-path="control-the-modebar.html"><a href="control-the-modebar.html#add-custom-modebar-buttons"><i class="fa fa-check"></i><b>30.4</b> Add custom modebar buttons</a></li>
<li class="chapter" data-level="30.5" data-path="control-the-modebar.html"><a href="control-the-modebar.html#control-image-downloads"><i class="fa fa-check"></i><b>30.5</b> Control image downloads</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="working-with-colors.html"><a href="working-with-colors.html"><i class="fa fa-check"></i><b>31</b> Working with colors</a></li>
<li class="chapter" data-level="32" data-path="working-with-symbols.html"><a href="working-with-symbols.html"><i class="fa fa-check"></i><b>32</b> Working with symbols and glyphs</a></li>
<li class="chapter" data-level="33" data-path="control-the-layout.html"><a href="control-the-layout.html"><i class="fa fa-check"></i><b>33</b> Control the layout</a><ul>
<li class="chapter" data-level="33.1" data-path="control-the-layout.html"><a href="control-the-layout.html#axis-titles"><i class="fa fa-check"></i><b>33.1</b> Axis titles</a></li>
<li class="chapter" data-level="33.2" data-path="control-the-layout.html"><a href="control-the-layout.html#axis-labels"><i class="fa fa-check"></i><b>33.2</b> Axis labels</a></li>
<li class="chapter" data-level="33.3" data-path="control-the-layout.html"><a href="control-the-layout.html#margins"><i class="fa fa-check"></i><b>33.3</b> Margins</a></li>
<li class="chapter" data-level="33.4" data-path="control-the-layout.html"><a href="control-the-layout.html#fonts"><i class="fa fa-check"></i><b>33.4</b> Fonts</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="locales.html"><a href="locales.html"><i class="fa fa-check"></i><b>34</b> Language support</a></li>
<li class="chapter" data-level="35" data-path="mathjax.html"><a href="mathjax.html"><i class="fa fa-check"></i><b>35</b> LaTeX rendering</a><ul>
<li class="chapter" data-level="35.1" data-path="mathjax.html"><a href="mathjax.html#mathjax-caveats"><i class="fa fa-check"></i><b>35.1</b> MathJax caveats</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="the-data-plot-pipeline.html"><a href="the-data-plot-pipeline.html"><i class="fa fa-check"></i><b>36</b> The data-plot-pipeline</a></li>
<li class="chapter" data-level="37" data-path="modifying-ggplotly.html"><a href="modifying-ggplotly.html"><i class="fa fa-check"></i><b>37</b> Modifying <code>ggplotly()</code> results</a><ul>
<li class="chapter" data-level="37.1" data-path="modifying-ggplotly.html"><a href="modifying-ggplotly.html#modifying-layout"><i class="fa fa-check"></i><b>37.1</b> Modifying layout</a></li>
<li class="chapter" data-level="37.2" data-path="modifying-ggplotly.html"><a href="modifying-ggplotly.html#modifying-data"><i class="fa fa-check"></i><b>37.2</b> Modifying data</a></li>
<li class="chapter" data-level="37.3" data-path="modifying-ggplotly.html"><a href="modifying-ggplotly.html#leveraging-statistical-output"><i class="fa fa-check"></i><b>37.3</b> Leveraging statistical output</a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="embedding-images.html"><a href="embedding-images.html"><i class="fa fa-check"></i><b>38</b> Embedding images</a></li>
<li class="part"><span><b>VIII Developer-facing topics</b></span></li>
<li class="chapter" data-level="39" data-path="custom-geoms.html"><a href="custom-geoms.html"><i class="fa fa-check"></i><b>39</b> Translating custom ggplot2 geoms</a></li>
<li class="chapter" data-level="40" data-path="designing-an-htmlwidget-interface.html"><a href="designing-an-htmlwidget-interface.html"><i class="fa fa-check"></i><b>40</b> Designing an htmlwidget interface</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Interactive web-based data visualization with R, plotly, and shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="editing-views" class="section level1">
<h1><span class="header-section-number">13</span> Editing views for publishing</h1>
<p>Numerous layout components of a <strong>plotly</strong> graph can be directly manipulated, including annotation text and placement (more on this in section <a href="linking-server-side.html#edit-events">18.2.3</a>). In addition, the download (aka, toImage) button can be customized to export a static version to different file types including: svg, png, jpeg, and webp. Since svg can be easily converted to pdf, this effectively means we can edit a graph in a browser to perform touch-ups, then export to a high-quality pdf. At least currently, this workflow is recommended over first exporting to pdf (via <code>orca()</code>) then using Adobe Illustrator to manipulate the vectors, especially for adjusting the placement of annotations.</p>
<p>Figure <a href="editing-views.html#fig:edit-county-labels">13.1</a> demonstrates this workflow on a choropleth map of estimated income in Minnesota by county where the top 10 counties by total income are labeled.<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a> For visuals like this, automated algorithms for placing the labels may not yield polished results, so it can be nice to have the option to adjust the placement manually. Although pressing ‘download plot’ exports a static version of the current state of the plot, there currently isn’t an official way to save the state of these manual edits in the HTML version. You could, however, create a shiny app that listens to the <code>'plotly_relayout'</code> event to obtain the new annotation positions (see, for example, Figure <a href="linking-server-side.html#fig:shiny-edit-annotations">18.5</a>) and translate that information into code.</p>
<details>
<p><summary>Click to show code</summary></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(sf)
<span class="kw">library</span>(purrr)
<span class="kw">library</span>(tidycensus)
<span class="kw">library</span>(USAboundaries)

<span class="co"># obtain geographical information for each county in MN</span>
mn_sf &lt;-<span class="st"> </span><span class="kw">us_counties</span>(<span class="dt">states =</span> <span class="st">&quot;MN&quot;</span>)

<span class="co"># get income information for each county in MN</span>
mn_income &lt;-<span class="st"> </span><span class="kw">get_acs</span>(<span class="dt">geography =</span> <span class="st">&quot;county&quot;</span>, <span class="dt">variables =</span> <span class="st">&quot;B19013_001&quot;</span>, <span class="dt">state =</span> <span class="st">&quot;MN&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">NAME =</span> <span class="kw">sub</span>(<span class="st">&quot;County, Minnesota&quot;</span>, <span class="st">&quot;&quot;</span>, NAME),
    <span class="dt">county =</span> <span class="kw">reorder</span>(NAME, estimate),
    <span class="dt">color =</span> scales<span class="op">::</span><span class="kw">col_numeric</span>(<span class="st">&quot;viridis&quot;</span>, <span class="ot">NULL</span>)(estimate)
  )

<span class="co"># find center of each county (for placing annotations)</span>
mn_center &lt;-<span class="st"> </span>mn_sf <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">st_centroid</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">x =</span> <span class="kw">map_dbl</span>(geometry, <span class="dv">1</span>),
    <span class="dt">y =</span> <span class="kw">map_dbl</span>(geometry, <span class="dv">2</span>)
  )

<span class="co"># get top 10 counties by income with their x/y center location</span>
top10labels &lt;-<span class="st"> </span>mn_income <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>, estimate) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(mn_center, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;GEOID&quot;</span> =<span class="st"> &quot;geoid&quot;</span>))

<span class="co"># the map and top 10 county labels</span>
map &lt;-<span class="st"> </span><span class="kw">plot_ly</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_sf</span>(
    <span class="dt">data =</span> <span class="kw">left_join</span>(mn_sf, mn_income, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;geoid&quot;</span> =<span class="st"> &quot;GEOID&quot;</span>)),
    <span class="dt">color =</span> <span class="op">~</span><span class="kw">I</span>(color),
    <span class="dt">split =</span> <span class="op">~</span>NAME,
    <span class="dt">stroke =</span> <span class="kw">I</span>(<span class="st">&quot;black&quot;</span>),
    <span class="dt">span =</span> <span class="kw">I</span>(<span class="dv">1</span>),
    <span class="dt">hoverinfo =</span> <span class="st">&quot;none&quot;</span>
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_annotations</span>(
    <span class="dt">data =</span> <span class="kw">select</span>(top10labels, NAME, x, y),
    <span class="dt">text =</span> <span class="op">~</span>NAME,
    <span class="dt">x =</span> <span class="op">~</span>x,
    <span class="dt">y =</span> <span class="op">~</span>y
  ) 

<span class="co"># the dot-plot</span>
bars &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mn_income, <span class="kw">aes</span>(<span class="dt">x =</span> estimate, <span class="dt">y =</span> county)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_errorbarh</span>(<span class="kw">aes</span>(<span class="dt">xmin =</span> estimate <span class="op">-</span><span class="st"> </span>moe, <span class="dt">xmax =</span> estimate <span class="op">+</span><span class="st"> </span>moe)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> color), <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_identity</span>()

<span class="co"># make manual edits in the browser, then click the </span>
<span class="co"># &#39;toImage&#39; button to export an svg file</span>
<span class="kw">ggplotly</span>(bars, <span class="dt">dynamicTicks =</span> <span class="ot">TRUE</span>, <span class="dt">tooltip =</span> <span class="st">&quot;y&quot;</span>, <span class="dt">height =</span> <span class="dv">8</span> <span class="op">*</span><span class="st"> </span><span class="dv">96</span>, <span class="dt">width =</span> <span class="dv">11</span> <span class="op">*</span><span class="st"> </span><span class="dv">96</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">subplot</span>(map, <span class="dt">nrows =</span> <span class="dv">1</span>, <span class="dt">widths =</span> <span class="kw">c</span>(<span class="fl">0.3</span>, <span class="fl">0.7</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">layout</span>(<span class="dt">showlegend =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">config</span>(
    <span class="dt">edits =</span> <span class="kw">list</span>(
      <span class="dt">annotationPosition =</span> <span class="ot">TRUE</span>,
      <span class="dt">annotationTail =</span> <span class="ot">TRUE</span>,
      <span class="dt">annotationText =</span> <span class="ot">TRUE</span>
    ),
    <span class="dt">toImageButtonOptions =</span> <span class="kw">list</span>(<span class="dt">format =</span> <span class="st">&quot;svg&quot;</span>)
  )</code></pre>
</details>
<div class="figure" style="text-align: center"><span id="fig:edit-county-labels"></span>
<iframe src="https://player.vimeo.com/video/309371928?title=0&amp;byline=0&amp;portrait=0" width="100%" height="400" frameborder="0" seamless="seamless" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
<p class="caption">
FIGURE 13.1: Estimated total income by county in Minnesota. The top 10 counties are labeled with editable annotations. After manually adjusting the placement of county labels in a web browser, and zooming in on the top 10 counties in the dot plot, the ‘download plot’ button is used to export to svg.
</p>
</div>
<p>After pressing the “download plot” button to export svg, then the <strong>rsvg</strong> package can be used to convert the svg to pdf <span class="citation">(Ooms <a href="#ref-rsvg" role="doc-biblioref">2018</a>)</span>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This is the directory that my browser places downloads...</span>
<span class="co"># you may have to change this to your download directory</span>
download_dir &lt;-<span class="st"> &quot;~/Downloads/&quot;</span>
withr<span class="op">::</span><span class="kw">with_dir</span>(download_dir, rsvg<span class="op">::</span><span class="kw">rsvg_pdf</span>(<span class="st">&quot;newplot.svg&quot;</span>, <span class="st">&quot;mn.pdf&quot;</span>))</code></pre>

</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-rsvg">
<p>Ooms, Jeroen. 2018. <em>Rsvg: Render Svg Images into Pdf, Png, Postscript, or Bitmap Arrays</em>. <a href="https://CRAN.R-project.org/package=rsvg">https://CRAN.R-project.org/package=rsvg</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="19">
<li id="fn19"><p>Yes, this is <a href="https://xkcd.com/1138/">essentially a population map</a>. A more informative visual would show income per person within a given county. I decided against showing the more informative version so the code would be more concise.<a href="editing-views.html#fnref19" class="footnote-back">↩</a></p></li>
</ol>
</div>
<script>
  var header = document.querySelector(".book-header h1");

  var img = document.createElement("img");
  img.src = "images/rstudioCloud.svg";
  img.width = 200;
  img.align = "right";
  img.style = "margin-top: 10px";

  var a = document.createElement("a");
  a.href = "https://rstudio.cloud/project/156701";
  a.target = "_blank";
  a.appendChild(img);

  header.appendChild(a);
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-60116966-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-60116966-3');
</script>
            </section>

          </div>
        </div>
      </div>
<a href="exporting-static-images.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="arranging-views.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cpsievert/plotly_book/edit/master/publishing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
